{"version":3,"file":"main.min.js","sources":["../packages/stadline/js-extension-bundle/Resources/public/js/underscore.js","../packages/stadline/js-extension-bundle/Resources/public/js/underscore.string.js","../packages/stadline/js-extension-bundle/Resources/public/js/underscore.template.js","../packages/stadline/js-extension-bundle/Resources/public/js/backbone.js","../packages/stadline/js-extension-bundle/Resources/public/js/backbone.mutators.js","../packages/stadline/js-extension-bundle/Resources/public/js/backbone.basicauth.js","../packages/stadline/js-extension-bundle/Resources/public/js/marionette.js","../packages/stadline/js-extension-bundle/Resources/public/js/marionette.filtering.js","../packages/stadline/js-extension-bundle/Resources/public/js/jquery.serialize-object.js","../packages/stadline/js-extension-bundle/Resources/public/backbone/extensions/application.js","../packages/stadline/js-extension-bundle/Resources/public/backbone/extensions/layoutview.js","../packages/stadline/js-extension-bundle/Resources/public/backbone/extensions/relationalmodel.js","../packages/stadline/js-extension-bundle/Resources/public/backbone/extensions/subcollection.js","../scripts/models/question.js","../scripts/collections/questions.js","../scripts/views/chat-room.js","../scripts/views/layout.js","../scripts/views/message-form.js","../scripts/main.js"],"names":["root","this","previousUnderscore","_","breaker","ArrayProto","Array","prototype","ObjProto","Object","FuncProto","Function","push","slice","concat","toString","hasOwnProperty","nativeForEach","forEach","nativeMap","map","nativeReduce","reduce","nativeReduceRight","reduceRight","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","indexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","isArray","nativeKeys","keys","nativeBind","bind","obj","_wrapped","exports","module","VERSION","each","iterator","context","length","i","call","collect","results","value","index","list","reduceError","foldl","inject","memo","initial","arguments","TypeError","foldr","find","detect","predicate","result","any","select","reject","all","identity","contains","include","target","invoke","method","args","isFunc","isFunction","apply","pluck","key","property","where","attrs","matches","findWhere","max","Math","Infinity","lastComputed","computed","min","shuffle","rand","shuffled","random","sample","n","guard","values","lookupIterator","sortBy","criteria","sort","left","right","a","b","group","behavior","groupBy","has","indexBy","countBy","sortedIndex","array","low","high","mid","toArray","size","first","head","take","last","rest","tail","drop","compact","flatten","input","shallow","output","isArguments","without","difference","partition","pass","fail","elem","uniq","unique","isSorted","seen","union","intersection","item","other","zip","object","from","hasIndex","range","start","stop","step","ceil","idx","ctor","func","bound","self","partial","boundArgs","position","bindAll","funcs","Error","f","memoize","hasher","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","timestamp","callNow","once","ran","wrap","wrapper","compose","after","times","isObject","pairs","invert","functions","methods","names","extend","source","prop","pick","copy","omit","defaults","clone","tap","interceptor","eq","aStack","bStack","className","String","global","multiline","ignoreCase","aCtor","constructor","bCtor","pop","isEqual","isEmpty","isString","isElement","nodeType","name","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","isUndefined","noConflict","constant","accum","floor","Date","getTime","entityMap","escape","&","<",">","\"","'","unescape","entityRegexes","RegExp","join","string","replace","match","mixin","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","template","text","data","settings","render","matcher","offset","variable","e","chain","_chain","define","amd","boolMatch","s","matchers","down","toLowerCase","test","nativeTrim","trim","nativeTrimRight","trimRight","nativeTrimLeft","trimLeft","parseNumber","strRepeat","str","qty","defaultToWhiteSpace","characters","_s","escapeRegExp","escapeChars","lt","gt","quot","amp","apos","reversedEscapeChars","sprintf","get_type","str_repeat","str_format","cache","parse","format","parse_tree","argv","arg","k","pad","pad_character","pad_length","cursor","tree_length","node_type","fromCharCode","parseInt","toExponential","toFixed","substring","abs","toUpperCase","charAt","fmt","_fmt","arg_names","exec","field_list","replacement_field","field_match","isBlank","stripTags","capitalize","chop","clean","strip","count","substr","pos","chars","split","swapCase","c","escapeHTML","m","unescapeHTML","entity","entityCode","splice","howmany","arr","insert","needle","separator","shift","lines","reverse","startsWith","starts","endsWith","ends","succ","charCodeAt","titleize","camelize","underscored","dasherize","classify","humanize","ltrim","rtrim","truncate","truncateStr","prune","pruneStr","tmpl","words","delimiter","padStr","type","padlen","lpad","rpad","lrpad","vsprintf","unshift","toNumber","decimals","NaN","numberFormat","number","dec","dsep","tsep","parts","fnums","strRight","sep","strRightBack","strLeft","strLeftBack","toSentence","lastSeparator","serial","lastMember","toSentenceSerial","slugify","to","regex","surround","quote","quoteChar","unquote","repeat","naturalCmp","str1","str2","cmpRegex","tokens1","tokens2","num1","num2","levenshtein","prev","current","j","toBoolean","trueValues","falseValues","lstrip","rstrip","center","rjust","ljust","q","toBool","$","templateSelector","templateString","html","fn","rendered","outerHtml","wrapAll","parent","factory","Backbone","require","jQuery","Zepto","ender","previousBackbone","emulateHTTP","emulateJSON","Events","on","callback","eventsApi","_events","events","ctx","off","_callback","retain","ev","l","trigger","allEvents","triggerEvents","stopListening","listeningTo","_listeningTo","remove","_listenId","eventSplitter","action","a1","a2","a3","listenMethods","listenTo","listenToOnce","implementation","unbind","Model","attributes","cid","collection","set","changed","initialize","validationError","idAttribute","toJSON","sync","get","attr","val","unset","changes","silent","changing","_validate","_changing","_previousAttributes","_pending","clear","hasChanged","changedAttributes","diff","old","previousAttributes","fetch","model","success","resp","wrapError","save","xhr","validate","serverAttrs","isNew","patch","destroy","url","base","urlError","encodeURIComponent","isValid","error","modelMethods","Collection","models","comparator","_reset","reset","setOptions","add","merge","addOptions","singular","_byId","_removeReference","existing","at","targetModel","sortable","sortAttr","toAdd","toRemove","modelMap","order","_prepareModel","_addReference","orderedModels","previousModels","create","_onModelEvent","event","attributeMethods","View","viewOptions","_ensureElement","delegateEvents","delegateEventSplitter","tagName","selector","$el","setElement","element","delegate","undelegateEvents","el","eventName","methodMap","params","dataType","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","noXhrPatch","ActiveXObject","ajax","window","XMLHttpRequest","dispatchEvent","update","delete","read","Router","routes","_bindRoutes","optionalParam","namedParam","splatParam","route","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","execute","navigate","optional","param","decodeURIComponent","History","handlers","location","routeStripper","rootStripper","isExplorer","trailingSlash","pathStripper","started","interval","atRoot","pathname","getHash","href","getFragment","forcePushState","_hasPushState","_wantsHashChange","decodeURI","search","hashChange","_wantsPushState","pushState","docMode","document","documentMode","oldIE","navigator","userAgent","frame","iframe","hide","appendTo","contentWindow","checkUrl","_checkUrlInterval","setInterval","loc","hash","replaceState","title","loadUrl","clearInterval","handler","assign","_updateHash","open","close","protoProps","staticProps","child","Surrogate","__super__","undef","returnExportsGlobal","Mutator","oldGet","oldSet","oldToJson","mutators","isMutator","ret","attrKey","meth","isSaving","isTransient","mutator","Mutators","amdWeb","btoa","encode","credentials","username","password","BasicAuth","getHeader","Authorization","originalSync","remoteUrl","remoteUrlParts","App","getParameter","headers","Marionette","previousChildViewContainer","ChildViewContainer","Container","views","_views","_indexByModel","_indexByCustom","_updateLength","view","customIndex","viewCid","findByModel","findByModelCid","modelCid","findByCid","findByCustom","findByIndex","previousWreqr","Wreqr","Handlers","_wreqrHandlers","setHandlers","setHandler","config","hasHandler","getHandler","removeHandler","removeAllHandlers","CommandStorage","_commands","getCommands","commandName","commands","command","instances","addCommand","clearCommands","Commands","storageType","_initializeStorage","_executeCommands","storage","StorageType","RequestResponse","request","EventAggregator","EA","Channel","channelName","vent","reqres","connectEvents","_connect","connectCommands","connectRequests","radio","Radio","_channels","_proxyMethods","channel","_getChannel","system","messageSystems","proxyMethod","messageSystem","previousMarionette","Deferred","getOption","optionName","undefined","proxyGetOption","normalizeMethods","normalizedHash","normalizeUIString","uiString","ui","r","normalizeUIKeys","normalizedKey","normalizeUIValues","actAsCollection","listProperty","triggerMethod","getEventName","splitter","methodName","triggerMethodOn","fnc","MonitorDOMRefresh","documentElement","handleShow","_isShown","triggerDOMRefresh","handleRender","_isRendered","isInDOM","bindFromStrings","evt","methodNames","bindToFunction","unbindFromStrings","unbindToFunction","iterateEvents","bindings","functionCallback","stringCallback","message","bindEntityEvents","unbindEntityEvents","proxyBindEntityEvents","proxyUnbindEntityEvents","errorProps","urlRoot","captureStackTrace","Callbacks","_deferred","_callbacks","contextOverride","promise","cb","then","run","resolve","callbacks","Controller","Region","getEl","buildRegion","regionConfig","DefaultRegionClass","_buildRegionFromSelector","regionClass","_buildRegionFromObject","_buildRegionFromRegionClass","RegionClass","region","parentEl","show","showOptions","isDifferentView","currentView","preventDestroy","forceShow","isChangingView","_shouldDestroyView","_shouldShowView","empty","attachHtml","innerHTML","appendChild","_destroyView","isDestroyed","attachView","hasView","RegionManager","_regions","addRegions","regionDefinitions","regions","definition","addRegion","_store","getRegions","removeRegion","_remove","removeRegions","emptyRegions","_setLength","TemplateCache","templateId","templateCaches","cachedTemplate","load","compiledTemplate","loadTemplate","compileTemplate","rawTemplate","Renderer","templateFunc","_behaviors","Behaviors","onShowCalled","getTemplate","serializeModel","mixinTemplateHelpers","templateHelpers","uiBindings","configureTriggers","triggers","_buildViewTrigger","_delegateDOMEvents","eventsArg","combinedEvents","behaviorEvents","behaviorTriggers","_ensureViewIsIntact","unbindUIElements","bindUIElements","_bindUIElements","_uiBindings","_unbindUIElements","triggerDef","hasOptions","preventDefault","stopPropagation","ItemView","serializeData","items","serializeCollection","_renderTemplate","attachElContent","CollectionView","childViewEventPrefix","initOptions","_initialEvents","_initChildViewStorage","initRenderBuffer","elBuffer","createDocumentFragment","_bufferedChildren","startBuffering","isBuffering","endBuffering","_triggerBeforeShowBufferedChildren","attachBuffer","_triggerShowBufferedChildren","_triggerMethodOnChild","childView","_onCollectionAdd","_onCollectionRemove","_sortViews","destroyEmptyView","ChildView","getChildView","addChild","children","removeChildView","checkEmpty","_renderChildren","resortView","orderChanged","_index","destroyChildren","showEmptyView","showCollection","EmptyView","getEmptyView","_showingEmptyView","addEmptyView","emptyViewOptions","buildChildView","proxyChildEvents","renderChildView","childViewOptions","_updateIndices","_addChildView","increment","laterView","ChildViewClass","collectionView","buffer","append","_insertBefore","_insertAfter","findPosition","before","childViews","rootEvent","childEvents","CompositeView","isRendered","resetChildViewContainer","compositeView","$container","getChildViewContainer","containerView","$childViewContainer","container","childViewContainer","LayoutView","_firstRender","_initializeRegions","_reInitializeRegions","regionManager","_buildRegions","getRegion","that","_initRegionManager","regionOptions","getRegionManager","Behavior","proxyViewProperties","behaviors","parseBehaviors","BehaviorTriggersBuilder","_view","_viewUI","_triggers","triggerBuilder","buildBehaviorTriggers","_behaviorsEvents","viewUI","behaviorUI","whitespace","eventKey","behaviorsLookup","getBehaviorClass","behaviorClass","BehaviorClass","nestedBehaviors","_buildTriggerHandlersForBehavior","triggersHash","_setHandlerForBehavior","triggerKey","triggerName","AppRouter","appRoutes","controller","_getController","processAppRoutes","_processOnRoute","appRoute","_addAppRoute","routeName","routeArgs","routePath","onRoute","routeNames","Application","_initCallbacks","submodules","_initChannel","addInitializer","initializer","_regionManager","moduleNames","moduleDefinition","ModuleClass","Module","getClass","optionRegions","moduleName","app","_setupInitializersAndFinalizers","startWithParent","_initializerCallbacks","addFinalizer","_finalizerCallbacks","_isInitialized","mod","addDefinition","customArgs","_runModuleDefinition","moduleDefinitions","parentModule","_getModule","_addModuleDefinition","def","moduleClass","_getDefine","_getStartWithParent","_addStartWithParent","swp","startWithParentIsConfigured","addChildView","closeEmptyView","itemView","getItemView","addItemView","FormSerializer","helper","$form","build","makeObject","patterns","incrementPush","fixed","named","pushes","pair","addPair","addPairs","len","serialize","serializeJSON","serializeObject","serializeArray","Extension","parameters","setParameter","preventHashChange","$target","currentTarget","openModal","modalView","modal","magnificPopup","src","midClick","layout","closeModal","modalViewClass","RelationalModel","_initialAttributes","addReference","givenModel","additionalValues","addedModels","addedModel","addReferences","givenModels","relatedModels","attribute","modelsToSync","hasUrl","isSyncable","_save","deferredSave","done","isVanilla","baseUrl","SubCollection","Message","Messages","Models","messages","Collections","ChatRoomMessage","modelEvents","change:text","ChatRoom","Layout","click a[href]","chatRoom","messageForm","onRender","Views","MessageForm","submit form","onFormSubmit","templates","body","ajaxSetup","X-Requested-With"],"mappings":"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","sourcesContent":["//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    concat           = ArrayProto.concat,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.6.0';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return obj;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(predicate, context);\n    each(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !predicate.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(predicate, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(predicate, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matches(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matches(attrs));\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    var result = -Infinity, lastComputed = -Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed > lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    var result = Infinity, lastComputed = Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed < lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Shuffle an array, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (obj.length !== +obj.length) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return value;\n    return _.property(value);\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iterator, context) {\n      var result = {};\n      iterator = lookupIterator(iterator);\n      each(obj, function(value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, key, value) {\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[0];\n    if (n < 0) return [];\n    return slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[array.length - 1];\n    return slice.call(array, Math.max(array.length - n, 0));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function(value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Split an array into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(array, predicate) {\n    var pass = [], fail = [];\n    each(array, function(elem) {\n      (predicate(elem) ? pass : fail).push(elem);\n    });\n    return [pass, fail];\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.contains(other, item);\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while(idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Reusable constructor function for prototype setting.\n  var ctor = function(){};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError;\n    args = slice.call(arguments, 2);\n    return bound = function() {\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\n      ctor.prototype = func.prototype;\n      var self = new ctor;\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) return result;\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    return function() {\n      var position = 0;\n      var args = boundArgs.slice();\n      for (var i = 0, length = args.length; i < length; i++) {\n        if (args[i] === _) args[i] = arguments[position++];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return func.apply(this, args);\n    };\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) throw new Error('bindAll must be passed function names');\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  _.constant = function(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  _.property = function(key) {\n    return function(obj) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\n  _.matches = function(attrs) {\n    return function(obj) {\n      if (obj === attrs) return true; //avoid comparing an object to itself.\n      for (var key in attrs) {\n        if (attrs[key] !== obj[key])\n          return false;\n      }\n      return true;\n    }\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() { return new Date().getTime(); };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return void 0;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}).call(this);\n","//  Underscore.string\n//  (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>\n//  Underscore.string is freely distributable under the terms of the MIT license.\n//  Documentation: https://github.com/epeli/underscore.string\n//  Some code is borrowed from MooTools and Alexandru Marasteanu.\n//  Version '2.3.2'\n\n!function(root, String){\n  'use strict';\n\n  // Defining helper functions.\n\n  var nativeTrim = String.prototype.trim;\n  var nativeTrimRight = String.prototype.trimRight;\n  var nativeTrimLeft = String.prototype.trimLeft;\n\n  var parseNumber = function(source) { return source * 1 || 0; };\n\n  var strRepeat = function(str, qty){\n    if (qty < 1) return '';\n    var result = '';\n    while (qty > 0) {\n      if (qty & 1) result += str;\n      qty >>= 1, str += str;\n    }\n    return result;\n  };\n\n  var slice = [].slice;\n\n  var defaultToWhiteSpace = function(characters) {\n    if (characters == null)\n      return '\\\\s';\n    else if (characters.source)\n      return characters.source;\n    else\n      return '[' + _s.escapeRegExp(characters) + ']';\n  };\n\n  // Helper for toBoolean\n  function boolMatch(s, matchers) {\n    var i, matcher, down = s.toLowerCase();\n    matchers = [].concat(matchers);\n    for (i = 0; i < matchers.length; i += 1) {\n      matcher = matchers[i];\n      if (!matcher) continue;\n      if (matcher.test && matcher.test(s)) return true;\n      if (matcher.toLowerCase() === down) return true;\n    }\n  }\n\n  var escapeChars = {\n    lt: '<',\n    gt: '>',\n    quot: '\"',\n    amp: '&',\n    apos: \"'\"\n  };\n\n  var reversedEscapeChars = {};\n  for(var key in escapeChars) reversedEscapeChars[escapeChars[key]] = key;\n  reversedEscapeChars[\"'\"] = '#39';\n\n  // sprintf() for JavaScript 0.7-beta1\n  // http://www.diveintojavascript.com/projects/javascript-sprintf\n  //\n  // Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>\n  // All rights reserved.\n\n  var sprintf = (function() {\n    function get_type(variable) {\n      return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    var str_repeat = strRepeat;\n\n    var str_format = function() {\n      if (!str_format.cache.hasOwnProperty(arguments[0])) {\n        str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\n      }\n      return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\n    };\n\n    str_format.format = function(parse_tree, argv) {\n      var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n      for (i = 0; i < tree_length; i++) {\n        node_type = get_type(parse_tree[i]);\n        if (node_type === 'string') {\n          output.push(parse_tree[i]);\n        }\n        else if (node_type === 'array') {\n          match = parse_tree[i]; // convenience purposes only\n          if (match[2]) { // keyword argument\n            arg = argv[cursor];\n            for (k = 0; k < match[2].length; k++) {\n              if (!arg.hasOwnProperty(match[2][k])) {\n                throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\n              }\n              arg = arg[match[2][k]];\n            }\n          } else if (match[1]) { // positional argument (explicit)\n            arg = argv[match[1]];\n          }\n          else { // positional argument (implicit)\n            arg = argv[cursor++];\n          }\n\n          if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\n            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\n          }\n          switch (match[8]) {\n            case 'b': arg = arg.toString(2); break;\n            case 'c': arg = String.fromCharCode(arg); break;\n            case 'd': arg = parseInt(arg, 10); break;\n            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n            case 'o': arg = arg.toString(8); break;\n            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\n            case 'u': arg = Math.abs(arg); break;\n            case 'x': arg = arg.toString(16); break;\n            case 'X': arg = arg.toString(16).toUpperCase(); break;\n          }\n          arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\n          pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\n          pad_length = match[6] - String(arg).length;\n          pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n          output.push(match[5] ? arg + pad : pad + arg);\n        }\n      }\n      return output.join('');\n    };\n\n    str_format.cache = {};\n\n    str_format.parse = function(fmt) {\n      var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n      while (_fmt) {\n        if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n          parse_tree.push(match[0]);\n        }\n        else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n          parse_tree.push('%');\n        }\n        else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n          if (match[2]) {\n            arg_names |= 1;\n            var field_list = [], replacement_field = match[2], field_match = [];\n            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n              field_list.push(field_match[1]);\n              while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                  field_list.push(field_match[1]);\n                }\n                else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                  field_list.push(field_match[1]);\n                }\n                else {\n                  throw new Error('[_.sprintf] huh?');\n                }\n              }\n            }\n            else {\n              throw new Error('[_.sprintf] huh?');\n            }\n            match[2] = field_list;\n          }\n          else {\n            arg_names |= 2;\n          }\n          if (arg_names === 3) {\n            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\n          }\n          parse_tree.push(match);\n        }\n        else {\n          throw new Error('[_.sprintf] huh?');\n        }\n        _fmt = _fmt.substring(match[0].length);\n      }\n      return parse_tree;\n    };\n\n    return str_format;\n  })();\n\n\n\n  // Defining underscore.string\n\n  var _s = {\n\n    VERSION: '2.3.0',\n\n    isBlank: function(str){\n      if (str == null) str = '';\n      return (/^\\s*$/).test(str);\n    },\n\n    stripTags: function(str){\n      if (str == null) return '';\n      return String(str).replace(/<\\/?[^>]+>/g, '');\n    },\n\n    capitalize : function(str){\n      str = str == null ? '' : String(str);\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n\n    chop: function(str, step){\n      if (str == null) return [];\n      str = String(str);\n      step = ~~step;\n      return step > 0 ? str.match(new RegExp('.{1,' + step + '}', 'g')) : [str];\n    },\n\n    clean: function(str){\n      return _s.strip(str).replace(/\\s+/g, ' ');\n    },\n\n    count: function(str, substr){\n      if (str == null || substr == null) return 0;\n\n      str = String(str);\n      substr = String(substr);\n\n      var count = 0,\n        pos = 0,\n        length = substr.length;\n\n      while (true) {\n        pos = str.indexOf(substr, pos);\n        if (pos === -1) break;\n        count++;\n        pos += length;\n      }\n\n      return count;\n    },\n\n    chars: function(str) {\n      if (str == null) return [];\n      return String(str).split('');\n    },\n\n    swapCase: function(str) {\n      if (str == null) return '';\n      return String(str).replace(/\\S/g, function(c){\n        return c === c.toUpperCase() ? c.toLowerCase() : c.toUpperCase();\n      });\n    },\n\n    escapeHTML: function(str) {\n      if (str == null) return '';\n      return String(str).replace(/[&<>\"']/g, function(m){ return '&' + reversedEscapeChars[m] + ';'; });\n    },\n\n    unescapeHTML: function(str) {\n      if (str == null) return '';\n      return String(str).replace(/\\&([^;]+);/g, function(entity, entityCode){\n        var match;\n\n        if (entityCode in escapeChars) {\n          return escapeChars[entityCode];\n        } else if (match = entityCode.match(/^#x([\\da-fA-F]+)$/)) {\n          return String.fromCharCode(parseInt(match[1], 16));\n        } else if (match = entityCode.match(/^#(\\d+)$/)) {\n          return String.fromCharCode(~~match[1]);\n        } else {\n          return entity;\n        }\n      });\n    },\n\n    escapeRegExp: function(str){\n      if (str == null) return '';\n      return String(str).replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n    },\n\n    splice: function(str, i, howmany, substr){\n      var arr = _s.chars(str);\n      arr.splice(~~i, ~~howmany, substr);\n      return arr.join('');\n    },\n\n    insert: function(str, i, substr){\n      return _s.splice(str, i, 0, substr);\n    },\n\n    include: function(str, needle){\n      if (needle === '') return true;\n      if (str == null) return false;\n      return String(str).indexOf(needle) !== -1;\n    },\n\n    join: function() {\n      var args = slice.call(arguments),\n        separator = args.shift();\n\n      if (separator == null) separator = '';\n\n      return args.join(separator);\n    },\n\n    lines: function(str) {\n      if (str == null) return [];\n      return String(str).split(\"\\n\");\n    },\n\n    reverse: function(str){\n      return _s.chars(str).reverse().join('');\n    },\n\n    startsWith: function(str, starts){\n      if (starts === '') return true;\n      if (str == null || starts == null) return false;\n      str = String(str); starts = String(starts);\n      return str.length >= starts.length && str.slice(0, starts.length) === starts;\n    },\n\n    endsWith: function(str, ends){\n      if (ends === '') return true;\n      if (str == null || ends == null) return false;\n      str = String(str); ends = String(ends);\n      return str.length >= ends.length && str.slice(str.length - ends.length) === ends;\n    },\n\n    succ: function(str){\n      if (str == null) return '';\n      str = String(str);\n      return str.slice(0, -1) + String.fromCharCode(str.charCodeAt(str.length-1) + 1);\n    },\n\n    titleize: function(str){\n      if (str == null) return '';\n      str  = String(str).toLowerCase();\n      return str.replace(/(?:^|\\s|-)\\S/g, function(c){ return c.toUpperCase(); });\n    },\n\n    camelize: function(str){\n      return _s.trim(str).replace(/[-_\\s]+(.)?/g, function(match, c){ return c ? c.toUpperCase() : \"\"; });\n    },\n\n    underscored: function(str){\n      return _s.trim(str).replace(/([a-z\\d])([A-Z]+)/g, '$1_$2').replace(/[-\\s]+/g, '_').toLowerCase();\n    },\n\n    dasherize: function(str){\n      return _s.trim(str).replace(/([A-Z])/g, '-$1').replace(/[-_\\s]+/g, '-').toLowerCase();\n    },\n\n    classify: function(str){\n      return _s.titleize(String(str).replace(/[\\W_]/g, ' ')).replace(/\\s/g, '');\n    },\n\n    humanize: function(str){\n      return _s.capitalize(_s.underscored(str).replace(/_id$/,'').replace(/_/g, ' '));\n    },\n\n    trim: function(str, characters){\n      if (str == null) return '';\n      if (!characters && nativeTrim) return nativeTrim.call(str);\n      characters = defaultToWhiteSpace(characters);\n      return String(str).replace(new RegExp('\\^' + characters + '+|' + characters + '+$', 'g'), '');\n    },\n\n    ltrim: function(str, characters){\n      if (str == null) return '';\n      if (!characters && nativeTrimLeft) return nativeTrimLeft.call(str);\n      characters = defaultToWhiteSpace(characters);\n      return String(str).replace(new RegExp('^' + characters + '+'), '');\n    },\n\n    rtrim: function(str, characters){\n      if (str == null) return '';\n      if (!characters && nativeTrimRight) return nativeTrimRight.call(str);\n      characters = defaultToWhiteSpace(characters);\n      return String(str).replace(new RegExp(characters + '+$'), '');\n    },\n\n    truncate: function(str, length, truncateStr){\n      if (str == null) return '';\n      str = String(str); truncateStr = truncateStr || '...';\n      length = ~~length;\n      return str.length > length ? str.slice(0, length) + truncateStr : str;\n    },\n\n    /**\n     * _s.prune: a more elegant version of truncate\n     * prune extra chars, never leaving a half-chopped word.\n     * @author github.com/rwz\n     */\n    prune: function(str, length, pruneStr){\n      if (str == null) return '';\n\n      str = String(str); length = ~~length;\n      pruneStr = pruneStr != null ? String(pruneStr) : '...';\n\n      if (str.length <= length) return str;\n\n      var tmpl = function(c){ return c.toUpperCase() !== c.toLowerCase() ? 'A' : ' '; },\n        template = str.slice(0, length+1).replace(/.(?=\\W*\\w*$)/g, tmpl); // 'Hello, world' -> 'HellAA AAAAA'\n\n      if (template.slice(template.length-2).match(/\\w\\w/))\n        template = template.replace(/\\s*\\S+$/, '');\n      else\n        template = _s.rtrim(template.slice(0, template.length-1));\n\n      return (template+pruneStr).length > str.length ? str : str.slice(0, template.length)+pruneStr;\n    },\n\n    words: function(str, delimiter) {\n      if (_s.isBlank(str)) return [];\n      return _s.trim(str, delimiter).split(delimiter || /\\s+/);\n    },\n\n    pad: function(str, length, padStr, type) {\n      str = str == null ? '' : String(str);\n      length = ~~length;\n\n      var padlen  = 0;\n\n      if (!padStr)\n        padStr = ' ';\n      else if (padStr.length > 1)\n        padStr = padStr.charAt(0);\n\n      switch(type) {\n        case 'right':\n          padlen = length - str.length;\n          return str + strRepeat(padStr, padlen);\n        case 'both':\n          padlen = length - str.length;\n          return strRepeat(padStr, Math.ceil(padlen/2)) + str\n                  + strRepeat(padStr, Math.floor(padlen/2));\n        default: // 'left'\n          padlen = length - str.length;\n          return strRepeat(padStr, padlen) + str;\n        }\n    },\n\n    lpad: function(str, length, padStr) {\n      return _s.pad(str, length, padStr);\n    },\n\n    rpad: function(str, length, padStr) {\n      return _s.pad(str, length, padStr, 'right');\n    },\n\n    lrpad: function(str, length, padStr) {\n      return _s.pad(str, length, padStr, 'both');\n    },\n\n    sprintf: sprintf,\n\n    vsprintf: function(fmt, argv){\n      argv.unshift(fmt);\n      return sprintf.apply(null, argv);\n    },\n\n    toNumber: function(str, decimals) {\n      if (!str) return 0;\n      str = _s.trim(str);\n      if (!str.match(/^-?\\d+(?:\\.\\d+)?$/)) return NaN;\n      return parseNumber(parseNumber(str).toFixed(~~decimals));\n    },\n\n    numberFormat : function(number, dec, dsep, tsep) {\n      if (isNaN(number) || number == null) return '';\n\n      number = number.toFixed(~~dec);\n      tsep = typeof tsep == 'string' ? tsep : ',';\n\n      var parts = number.split('.'), fnums = parts[0],\n        decimals = parts[1] ? (dsep || '.') + parts[1] : '';\n\n      return fnums.replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1' + tsep) + decimals;\n    },\n\n    strRight: function(str, sep){\n      if (str == null) return '';\n      str = String(str); sep = sep != null ? String(sep) : sep;\n      var pos = !sep ? -1 : str.indexOf(sep);\n      return ~pos ? str.slice(pos+sep.length, str.length) : str;\n    },\n\n    strRightBack: function(str, sep){\n      if (str == null) return '';\n      str = String(str); sep = sep != null ? String(sep) : sep;\n      var pos = !sep ? -1 : str.lastIndexOf(sep);\n      return ~pos ? str.slice(pos+sep.length, str.length) : str;\n    },\n\n    strLeft: function(str, sep){\n      if (str == null) return '';\n      str = String(str); sep = sep != null ? String(sep) : sep;\n      var pos = !sep ? -1 : str.indexOf(sep);\n      return ~pos ? str.slice(0, pos) : str;\n    },\n\n    strLeftBack: function(str, sep){\n      if (str == null) return '';\n      str += ''; sep = sep != null ? ''+sep : sep;\n      var pos = str.lastIndexOf(sep);\n      return ~pos ? str.slice(0, pos) : str;\n    },\n\n    toSentence: function(array, separator, lastSeparator, serial) {\n      separator = separator || ', ';\n      lastSeparator = lastSeparator || ' and ';\n      var a = array.slice(), lastMember = a.pop();\n\n      if (array.length > 2 && serial) lastSeparator = _s.rtrim(separator) + lastSeparator;\n\n      return a.length ? a.join(separator) + lastSeparator + lastMember : lastMember;\n    },\n\n    toSentenceSerial: function() {\n      var args = slice.call(arguments);\n      args[3] = true;\n      return _s.toSentence.apply(_s, args);\n    },\n\n    slugify: function(str) {\n      if (str == null) return '';\n\n      var from  = \"ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź\",\n          to    = \"aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz\",\n          regex = new RegExp(defaultToWhiteSpace(from), 'g');\n\n      str = String(str).toLowerCase().replace(regex, function(c){\n        var index = from.indexOf(c);\n        return to.charAt(index) || '-';\n      });\n\n      return _s.dasherize(str.replace(/[^\\w\\s-]/g, ''));\n    },\n\n    surround: function(str, wrapper) {\n      return [wrapper, str, wrapper].join('');\n    },\n\n    quote: function(str, quoteChar) {\n      return _s.surround(str, quoteChar || '\"');\n    },\n\n    unquote: function(str, quoteChar) {\n      quoteChar = quoteChar || '\"';\n      if (str[0] === quoteChar && str[str.length-1] === quoteChar)\n        return str.slice(1,str.length-1);\n      else return str;\n    },\n\n    exports: function() {\n      var result = {};\n\n      for (var prop in this) {\n        if (!this.hasOwnProperty(prop) || prop.match(/^(?:include|contains|reverse)$/)) continue;\n        result[prop] = this[prop];\n      }\n\n      return result;\n    },\n\n    repeat: function(str, qty, separator){\n      if (str == null) return '';\n\n      qty = ~~qty;\n\n      // using faster implementation if separator is not needed;\n      if (separator == null) return strRepeat(String(str), qty);\n\n      // this one is about 300x slower in Google Chrome\n      for (var repeat = []; qty > 0; repeat[--qty] = str) {}\n      return repeat.join(separator);\n    },\n\n    naturalCmp: function(str1, str2){\n      if (str1 == str2) return 0;\n      if (!str1) return -1;\n      if (!str2) return 1;\n\n      var cmpRegex = /(\\.\\d+)|(\\d+)|(\\D+)/g,\n        tokens1 = String(str1).toLowerCase().match(cmpRegex),\n        tokens2 = String(str2).toLowerCase().match(cmpRegex),\n        count = Math.min(tokens1.length, tokens2.length);\n\n      for(var i = 0; i < count; i++) {\n        var a = tokens1[i], b = tokens2[i];\n\n        if (a !== b){\n          var num1 = parseInt(a, 10);\n          if (!isNaN(num1)){\n            var num2 = parseInt(b, 10);\n            if (!isNaN(num2) && num1 - num2)\n              return num1 - num2;\n          }\n          return a < b ? -1 : 1;\n        }\n      }\n\n      if (tokens1.length === tokens2.length)\n        return tokens1.length - tokens2.length;\n\n      return str1 < str2 ? -1 : 1;\n    },\n\n    levenshtein: function(str1, str2) {\n      if (str1 == null && str2 == null) return 0;\n      if (str1 == null) return String(str2).length;\n      if (str2 == null) return String(str1).length;\n\n      str1 = String(str1); str2 = String(str2);\n\n      var current = [], prev, value;\n\n      for (var i = 0; i <= str2.length; i++)\n        for (var j = 0; j <= str1.length; j++) {\n          if (i && j)\n            if (str1.charAt(j - 1) === str2.charAt(i - 1))\n              value = prev;\n            else\n              value = Math.min(current[j], current[j - 1], prev) + 1;\n          else\n            value = i + j;\n\n          prev = current[j];\n          current[j] = value;\n        }\n\n      return current.pop();\n    },\n\n    toBoolean: function(str, trueValues, falseValues) {\n      if (typeof str === \"number\") str = \"\" + str;\n      if (typeof str !== \"string\") return !!str;\n      str = _s.trim(str);\n      if (boolMatch(str, trueValues || [\"true\", \"1\"])) return true;\n      if (boolMatch(str, falseValues || [\"false\", \"0\"])) return false;\n    }\n  };\n\n  // Aliases\n\n  _s.strip    = _s.trim;\n  _s.lstrip   = _s.ltrim;\n  _s.rstrip   = _s.rtrim;\n  _s.center   = _s.lrpad;\n  _s.rjust    = _s.lpad;\n  _s.ljust    = _s.rpad;\n  _s.contains = _s.include;\n  _s.q        = _s.quote;\n  _s.toBool   = _s.toBoolean;\n\n  // Exporting\n\n  // CommonJS module is defined\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports)\n      module.exports = _s;\n\n    exports._s = _s;\n  }\n\n  // Register as a named module with AMD.\n  if (typeof define === 'function' && define.amd)\n    define('underscore.string', [], function(){ return _s; });\n\n\n  // Integrate with Underscore.js if defined\n  // or create our own underscore object.\n  root._ = root._ || {};\n  root._.string = root._.str = _s;\n}(this, String);\n","// integrate underscore string\n_.mixin(_.str.exports());\n\n// change underscore tempate syntax\n_.templateSettings = {\n    evaluate:    /<%([\\s\\S]+?)%>/g,          // <% console.log(\"blah\") %>\n    escape:      /\\{\\{[^\\=]([\\s\\S]+?)\\}\\}/g, // {{ title }}\n    interpolate: /\\{\\{\\=([\\s\\S]+?)\\}\\}/g     // {{= html_content }}\n};\n\n// create a jQuery shortcut\n$.render = function(templateSelector, data, settings) {\n    var templateString = $(templateSelector).html();\n    var template = _.template(templateString, settings);\n\n    return $(template(data));\n};\n\n$.fn.render = function(templateSelector, data, settings) {\n    var rendered = $.render(templateSelector, data, settings);\n    var outerHtml = rendered.wrapAll('<div />').parent().html();\n\n    return $(this).html(outerHtml);\n};","//     Backbone.js 1.1.2\n\n//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(root, factory) {\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore');\n    factory(root, exports, _);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(this, function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create local references to array methods we'll want to use later.\n  var array = [];\n  var push = array.push;\n  var slice = array.slice;\n  var splice = array.splice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.1.2';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // custom events. You may bind with `on` or remove with `off` callback\n  // functions to an event; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {\n\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\n    // the callback to all events fired.\n    on: function(name, callback, context) {\n      if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n      this._events || (this._events = {});\n      var events = this._events[name] || (this._events[name] = []);\n      events.push({callback: callback, context: context, ctx: context || this});\n      return this;\n    },\n\n    // Bind an event to only be triggered a single time. After the first time\n    // the callback is invoked, it will be removed.\n    once: function(name, callback, context) {\n      if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n      var self = this;\n      var once = _.once(function() {\n        self.off(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n      return this.on(name, once, context);\n    },\n\n    // Remove one or many callbacks. If `context` is null, removes all\n    // callbacks with that function. If `callback` is null, removes all\n    // callbacks for the event. If `name` is null, removes all bound\n    // callbacks for all events.\n    off: function(name, callback, context) {\n      var retain, ev, events, names, i, l, j, k;\n      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n      if (!name && !callback && !context) {\n        this._events = void 0;\n        return this;\n      }\n      names = name ? [name] : _.keys(this._events);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (events = this._events[name]) {\n          this._events[name] = retain = [];\n          if (callback || context) {\n            for (j = 0, k = events.length; j < k; j++) {\n              ev = events[j];\n              if ((callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n                  (context && context !== ev.context)) {\n                retain.push(ev);\n              }\n            }\n          }\n          if (!retain.length) delete this._events[name];\n        }\n      }\n\n      return this;\n    },\n\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\n    // passed the same arguments as `trigger` is, apart from the event name\n    // (unless you're listening on `\"all\"`, which will cause your callback to\n    // receive the true name of the event as the first argument).\n    trigger: function(name) {\n      if (!this._events) return this;\n      var args = slice.call(arguments, 1);\n      if (!eventsApi(this, 'trigger', name, args)) return this;\n      var events = this._events[name];\n      var allEvents = this._events.all;\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, arguments);\n      return this;\n    },\n\n    // Tell this object to stop listening to either specific events ... or\n    // to every object it's currently listening to.\n    stopListening: function(obj, name, callback) {\n      var listeningTo = this._listeningTo;\n      if (!listeningTo) return this;\n      var remove = !name && !callback;\n      if (!callback && typeof name === 'object') callback = this;\n      if (obj) (listeningTo = {})[obj._listenId] = obj;\n      for (var id in listeningTo) {\n        obj = listeningTo[id];\n        obj.off(name, callback, this);\n        if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];\n      }\n      return this;\n    }\n\n  };\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Implement fancy features of the Events API such as multiple event\n  // names `\"change blur\"` and jQuery-style event maps `{change: action}`\n  // in terms of the existing API.\n  var eventsApi = function(obj, action, name, rest) {\n    if (!name) return true;\n\n    // Handle event maps.\n    if (typeof name === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n      return false;\n    }\n\n    // Handle space separated event names.\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n      return false;\n    }\n\n    return true;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  var listenMethods = {listenTo: 'on', listenToOnce: 'once'};\n\n  // Inversion-of-control versions of `on` and `once`. Tell *this* object to\n  // listen to an event in another object ... keeping track of what it's\n  // listening to.\n  _.each(listenMethods, function(implementation, method) {\n    Events[method] = function(obj, name, callback) {\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\n      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n      listeningTo[id] = obj;\n      if (!callback && typeof name === 'object') callback = this;\n      obj[implementation](name, callback, this);\n      return this;\n    };\n  });\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId('c');\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      var attr, attrs, unset, changes, silent, changing, prev, current;\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      unset           = options.unset;\n      silent          = options.silent;\n      changes         = [];\n      changing        = this._changing;\n      this._changing  = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n      current = this.attributes, prev = this._previousAttributes;\n\n      // Check for changes of `id`.\n      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];\n\n      // For each `set` attribute, update or delete the current value.\n      for (attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          this.changed[attr] = val;\n        } else {\n          delete this.changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0, l = changes.length; i < l; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var val, changed = false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      for (var attr in diff) {\n        if (_.isEqual(old[attr], (val = diff[attr]))) continue;\n        (changed || (changed = {}))[attr] = val;\n      }\n      return changed;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server. If the server's representation of the\n    // model differs from its current attributes, they will be overridden,\n    // triggering a `\"change\"` event.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        if (!model.set(model.parse(resp, options), options)) return false;\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      var attrs, method, xhr, attributes = this.attributes;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true}, options);\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !options.wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // Set temporary attributes if `{wait: true}`.\n      if (attrs && options.wait) {\n        this.attributes = _.extend({}, attributes, attrs);\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = model.parse(resp, options);\n        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);\n        if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {\n          return false;\n        }\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch') options.attrs = attrs;\n      xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      if (attrs && options.wait) this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n\n      var destroy = function() {\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (options.wait || model.isNew()) destroy();\n        if (success) success(model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      if (this.isNew()) {\n        options.success();\n        return false;\n      }\n      wrapError(this, options);\n\n      var xhr = this.sync('delete', this, options);\n      if (!options.wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      return base.replace(/([^\\/])$/, '$1/') + encodeURIComponent(this.id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend(options || {}, { validate: true }));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model.\n  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, function(method) {\n    Model.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.attributes);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analagous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model){ return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      options || (options = {});\n      var i, l, index, model;\n      for (i = 0, l = models.length; i < l; i++) {\n        model = models[i] = this.get(models[i]);\n        if (!model) continue;\n        delete this._byId[model.id];\n        delete this._byId[model.cid];\n        index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n        this._removeReference(model, options);\n      }\n      return singular ? models[0] : models;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      options = _.defaults({}, options, setOptions);\n      if (options.parse) models = this.parse(models, options);\n      var singular = !_.isArray(models);\n      models = singular ? (models ? [models] : []) : _.clone(models);\n      var i, l, id, model, attrs, existing, sort;\n      var at = options.at;\n      var targetModel = this.model;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n      var toAdd = [], toRemove = [], modelMap = {};\n      var add = options.add, merge = options.merge, remove = options.remove;\n      var order = !sortable && add && remove ? [] : false;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      for (i = 0, l = models.length; i < l; i++) {\n        attrs = models[i] || {};\n        if (attrs instanceof Model) {\n          id = model = attrs;\n        } else {\n          id = attrs[targetModel.prototype.idAttribute || 'id'];\n        }\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        if (existing = this.get(id)) {\n          if (remove) modelMap[existing.cid] = true;\n          if (merge) {\n            attrs = attrs === model ? model.attributes : attrs;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(attrs, options);\n          if (!model) continue;\n          toAdd.push(model);\n          this._addReference(model, options);\n        }\n\n        // Do not add multiple models with the same `id`.\n        model = existing || model;\n        if (order && (model.isNew() || !modelMap[model.id])) order.push(model);\n        modelMap[model.id] = true;\n      }\n\n      // Remove nonexistent models if appropriate.\n      if (remove) {\n        for (i = 0, l = this.length; i < l; ++i) {\n          if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this.remove(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      if (toAdd.length || (order && order.length)) {\n        if (sortable) sort = true;\n        this.length += toAdd.length;\n        if (at != null) {\n          for (i = 0, l = toAdd.length; i < l; i++) {\n            this.models.splice(at + i, 0, toAdd[i]);\n          }\n        } else {\n          if (order) this.models.length = 0;\n          var orderedModels = order || toAdd;\n          for (i = 0, l = orderedModels.length; i < l; i++) {\n            this.models.push(orderedModels[i]);\n          }\n        }\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0, l = toAdd.length; i < l; i++) {\n          (model = toAdd[i]).trigger('add', model, this, options);\n        }\n        if (sort || (order && order.length)) this.trigger('sort', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options || (options = {});\n      for (var i = 0, l = this.models.length; i < l; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] || this._byId[obj.id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      if (_.isEmpty(attrs)) return first ? void 0 : [];\n      return this[first ? 'find' : 'filter'](function(model) {\n        for (var key in attrs) {\n          if (attrs[key] !== model.get(key)) return false;\n        }\n        return true;\n      });\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      if (!this.comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      // Run sort based on type of `comparator`.\n      if (_.isString(this.comparator) || this.comparator.length === 1) {\n        this.models = this.sortBy(this.comparator, this);\n      } else {\n        this.models.sort(_.bind(this.comparator, this));\n      }\n\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success(collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      if (!(model = this._prepareModel(model, options))) return false;\n      if (!options.wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp) {\n        if (options.wait) collection.add(model, options);\n        if (success) success(model, resp, options);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (attrs instanceof Model) return attrs;\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      if (model.id != null) this._byId[model.id] = model;\n      if (!model.collection) model.collection = this;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (model && event === 'change:' + model.idAttribute) {\n        delete this._byId[model.previous(model.idAttribute)];\n        if (model.id != null) this._byId[model.id] = model;\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty', 'chain', 'sample'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, function(method) {\n    Collection.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.models);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, function(method) {\n    Collection.prototype[method] = function(value, context) {\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _[method](this.models, iterator, context);\n    };\n  });\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    options || (options = {});\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this.$el.remove();\n      this.stopListening();\n      return this;\n    },\n\n    // Change the view's element (`this.el` property), including event\n    // re-delegation.\n    setElement: function(element, delegate) {\n      if (this.$el) this.undelegateEvents();\n      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) this.delegateEvents();\n      return this;\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    // This only works for delegate-able events: not `focus`, `blur`, and\n    // not `change`, `submit`, and `reset` in Internet Explorer.\n    delegateEvents: function(events) {\n      if (!(events || (events = _.result(this, 'events')))) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[events[key]];\n        if (!method) continue;\n\n        var match = key.match(delegateEventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, this);\n        eventName += '.delegateEvents' + this.cid;\n        if (selector === '') {\n          this.$el.on(eventName, method);\n        } else {\n          this.$el.on(eventName, selector, method);\n        }\n      }\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view with `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);\n        this.setElement($el, false);\n      } else {\n        this.setElement(_.result(this, 'el'), false);\n      }\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // If we're sending a `PATCH` request, and we're in an old Internet Explorer\n    // that still has ActiveX enabled by default, override jQuery to use that\n    // for XHR instead. Remove this line when jQuery supports `PATCH` on IE8.\n    if (params.type === 'PATCH' && noXhrPatch) {\n      params.xhr = function() {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      };\n    }\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  var noXhrPatch =\n    typeof window !== 'undefined' && !!window.ActiveXObject &&\n      !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        router.execute(callback, args);\n        router.trigger.apply(router, ['route:' + name].concat(args));\n        router.trigger('route', name, args);\n        Backbone.history.trigger('route', router, name, args);\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    _.bindAll(this, 'checkUrl');\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for detecting MSIE.\n  var isExplorer = /msie [\\w.]+/;\n\n  // Cached regex for removing a trailing slash.\n  var trailingSlash = /\\/$/;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      return this.location.pathname.replace(/[^\\/]$/, '$&/') === this.root;\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the cross-browser normalized URL fragment, either from the URL,\n    // the hash, or the override.\n    getFragment: function(fragment, forcePushState) {\n      if (fragment == null) {\n        if (this._hasPushState || !this._wantsHashChange || forcePushState) {\n          fragment = decodeURI(this.location.pathname + this.location.search);\n          var root = this.root.replace(trailingSlash, '');\n          if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error(\"Backbone.history has already been started\");\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);\n      var fragment          = this.getFragment();\n      var docMode           = document.documentMode;\n      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      if (oldIE && this._wantsHashChange) {\n        var frame = Backbone.$('<iframe src=\"javascript:0\" tabindex=\"-1\">');\n        this.iframe = frame.hide().appendTo('body')[0].contentWindow;\n        this.navigate(fragment);\n      }\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._hasPushState) {\n        Backbone.$(window).on('popstate', this.checkUrl);\n      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {\n        Backbone.$(window).on('hashchange', this.checkUrl);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      // Determine if we need to change the base url, for a pushState link\n      // opened by a non-pushState browser.\n      this.fragment = fragment;\n      var loc = this.location;\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          this.fragment = this.getFragment(null, true);\n          this.location.replace(this.root + '#' + this.fragment);\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot() && loc.hash) {\n          this.fragment = this.getHash().replace(routeStripper, '');\n          this.history.replaceState({}, document.title, this.root + this.fragment);\n        }\n\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n      if (current === this.fragment && this.iframe) {\n        current = this.getFragment(this.getHash(this.iframe));\n      }\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.any(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      var url = this.root + (fragment = this.getFragment(fragment || ''));\n\n      // Strip the hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // Don't include a trailing slash on the root.\n      if (fragment === '' && url !== '/') url = url.slice(0, -1);\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._hasPushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if(!options.replace) this.iframe.document.open().close();\n          this._updateHash(this.iframe.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error(model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n","(function (root, factory, undef) {\n    'use strict';\n\n    if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory(require('underscore'), require('backbone'));\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['underscore', 'backbone'], function (_, Backbone) {\n            // Check if we use the AMD branch of Back\n            _ = _ === undef ? root._ : _;\n            Backbone = Backbone === undef ? root.Backbone : Backbone;\n            return (root.returnExportsGlobal = factory(_, Backbone, root));\n        });\n    } else {\n        // Browser globals\n        root.returnExportsGlobal = factory(root._, root.Backbone);\n    }\n\n// Usage:\n//\n// Note: This plugin is UMD compatible, you can use it in node, amd and vanilla js envs\n//\n// Vanilla JS:\n// <script src=\"underscore.js\"></script>\n// <script src=\"backbone.js\"></script>\n// <script src=\"backbone.mutators.js\"></script>\n//\n// Node:\n// var _ = require('underscore');\n// var Backbone = require('backbone');\n// var Mutators = require('backbone.mutators');\n//\n//\n// AMD:\n// define(['underscore', 'backbone', 'backbone.mutators'], function (_, Backbone, Mutators) {\n//    // insert sample from below\n//    return User;\n// });\n//\n// var User = Backbone.Model.extend({\n//    mutators: {\n//        fullname: function () {\n//            return this.firstname + ' ' + this.lastname;\n//        }\n//    },\n//\n//    defaults: {\n//        firstname: 'Sebastian',\n//        lastname: 'Golasch'\n//    }\n// });\n//\n// var user = new User();\n// user.get('fullname') // returns 'Sebastian Golasch'\n// user.toJSON() // return '{firstname: 'Sebastian', lastname: 'Golasch', fullname: 'Sebastian Golasch'}'\n\n}(this, function (_, Backbone, root, undef) {\n    'use strict';\n\n    // check if we use the amd branch of backbone and underscore\n    Backbone = Backbone === undef ? root.Backbone : Backbone;\n    _ = _ === undef ? root._ : _;\n\n    // extend backbones model prototype with the mutator functionality\n    var Mutator     = function () {},\n        oldGet      = Backbone.Model.prototype.get,\n        oldSet      = Backbone.Model.prototype.set,\n        oldToJson   = Backbone.Model.prototype.toJSON;\n\n    // This is necessary to ensure that Models declared without the mutators object do not throw and error\n    Mutator.prototype.mutators = {};\n\n    // override get functionality to fetch the mutator props\n    Mutator.prototype.get = function (attr) {\n        var isMutator = this.mutators !== undef;\n\n        // check if we have a getter mutation\n        if (isMutator === true && _.isFunction(this.mutators[attr]) === true) {\n            return this.mutators[attr].call(this);\n        }\n\n        // check if we have a deeper nested getter mutation\n        if (isMutator === true && _.isObject(this.mutators[attr]) === true && _.isFunction(this.mutators[attr].get) === true) {\n            return this.mutators[attr].get.call(this);\n        }\n\n        return oldGet.call(this, attr);\n    };\n\n    // override set functionality to set the mutator props\n    Mutator.prototype.set = function (key, value, options) {\n        var isMutator = this.mutators !== undef,\n            ret = null,\n            attrs = null;\n\n\t\tret = oldSet.call(this, key, value, options);\n\n        // seamleassly stolen from backbone core\n        // check if the setter action is triggered\n        // using key <-> value or object\n        if (_.isObject(key) || key === null) {\n            attrs = key;\n            options = value;\n        } else {\n            attrs = {};\n            attrs[key] = value;\n        }\n\n        // check if we have a deeper nested setter mutation\n        if (isMutator === true && _.isObject(this.mutators[key]) === true) {\n\n            // check if we need to set a single value\n            if (_.isFunction(this.mutators[key].set) === true) {\n                ret = this.mutators[key].set.call(this, key, attrs[key], options, _.bind(oldSet, this));\n            } else if(_.isFunction(this.mutators[key])){\n                ret = this.mutators[key].call(this, key, attrs[key], options, _.bind(oldSet, this));\n            }\n        }\n\n        if (isMutator === true && _.isObject(attrs)) {\n            _.each(attrs, _.bind(function (attr, attrKey) {\n                if (_.isObject(this.mutators[attrKey]) === true) {\n                    // check if we need to set a single value\n\n                    var meth = this.mutators[attrKey];\n                    if(_.isFunction(meth.set)){\n                        meth = meth.set;\n                    }\n\n                    if(_.isFunction(meth)){\n                        if (options === undef || (_.isObject(options) === true && options.silent !== true && (options.mutators !== undef && options.mutators.silent !== true))) {\n                            this.trigger('mutators:set:' + attrKey);\n                        }\n                        meth.call(this, attrKey, attr, options, _.bind(oldSet, this));\n                    }\n\n                }\n            }, this));\n        }\n\n        return ret;\n    };\n\n    // override toJSON functionality to serialize mutator properties\n    Mutator.prototype.toJSON = function (options) {\n        // fetch ye olde values\n        var attr = oldToJson.call(this),\n            isSaving,\n            isTransient;\n        // iterate over all mutators (if there are some)\n        _.each(this.mutators, _.bind(function (mutator, name) {\n            // check if we have some getter mutations\n            if (_.isObject(this.mutators[name]) === true && _.isFunction(this.mutators[name].get)) {\n                isSaving = _.has(options || {}, 'emulateHTTP');\n                isTransient = this.mutators[name].transient;\n                if (!isSaving || !isTransient) {\n                  attr[name] = _.bind(this.mutators[name].get, this)();\n                }\n            } else if (_.isFunction(this.mutators[name])) {\n                attr[name] = _.bind(this.mutators[name], this)();\n            }\n        }, this));\n\n        return attr;\n    };\n\n    // override get functionality to get HTML-escaped the mutator props\n    Mutator.prototype.escape = function (attr){\n        var val = this.get(attr);\n        return _.escape(val == null ? '' : '' + val);\n    };\n\n    // extend the models prototype\n    _.extend(Backbone.Model.prototype, Mutator.prototype);\n\n    // make mutators globally available under the Backbone namespace\n    Backbone.Mutators = Mutator;\n    return Mutator;\n}));\n","/*!\n * backbone.basicauth.js v0.4.0\n * modified to use application credential parameter as default\n *\n * Adds HTTP Basic Authentication headers,\n * either by reading them from a model property,\n * or by parsing the model/collection.url.\n *\n * Copyright 2013, Tom Spencer (@fiznool), Luis Abreu (@lmjabreu)\n * backbone.basicauth.js may be freely distributed under the MIT license.\n */\n;\n(function(root, factory) {\n    // AMD module if available\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['underscore', 'backbone'], factory);\n    } else {\n        // Browser globals\n        root.amdWeb = factory(root._, root.Backbone);\n    }\n}(this, function(_, Backbone) {\n    var btoa = window.btoa;\n\n    /**\n     * Returns a base64 encoded \"user:pass\" string\n     * @param  {string} username The http auth username\n     * @param  {string} password The http auth password\n     * @return {string}          The base64 encoded credentials pair\n     */\n    var encode = function(credentials) {\n        // Use Base64 encoding to create the authentication details\n        // If btoa is not available on your target browser there is a polyfill:\n        // https://github.com/davidchambers/Base64.js\n        // Using unescape and encodeURIComponent to allow for Unicode strings\n        // https://developer.mozilla.org/en-US/docs/Web/API/window.btoa#Unicode_Strings\n        return btoa(unescape(encodeURIComponent(\n            [credentials.username, credentials.password].join(':')\n        )));\n    };\n\n    // Add a public method so that anything else can also create the header\n    Backbone.BasicAuth = {\n        getHeader: function(credentials) {\n            return {\n                'Authorization': 'Basic ' + encode(credentials)\n            };\n        }\n    };\n\n    // Store a copy of the original Backbone.sync\n    var originalSync = Backbone.sync;\n\n    /**\n     * Override Backbone.sync\n     *\n     * If a token is present, set the Basic Auth header before the sync is performed.\n     *\n     * @param  {string} method  Contains the backbone operation. e.g.: read, reset, set\n     * @param  {object} model   A Backbone model or collection\n     * @param  {object} options Options to be passed over to Backbone.sync and jQuery\n     * @return {object}         Reference to Backbone.sync for chaining\n     */\n    Backbone.sync = function(method, model, options) {\n        options = options || {};\n\n        // Basic Auth supports two modes: URL-based and function-based.\n        var credentials = App.getParameter('credentials'), remoteUrl, remoteUrlParts;\n\n        if (model.credentials) {\n            // Try function-based.\n            credentials = _.result(model, 'credentials');\n        }\n\n        if (credentials == null) {\n            // Try URL-based.\n            // Handle both string and function urls\n            remoteUrl = options.url || _.result(model, 'url');\n\n            // Retrieve the auth credentials from the model url\n            remoteUrlParts = remoteUrl.match(/\\/\\/(.*):(.*)@/);\n\n            if (remoteUrlParts && remoteUrlParts.length === 3) {\n                credentials = {\n                    username: remoteUrlParts[1],\n                    password: remoteUrlParts[2]\n                };\n            }\n        }\n\n        // Add the token to the request headers if available\n        if (credentials != null) {\n            options.headers = options.headers || {};\n            _.extend(options.headers, Backbone.BasicAuth.getHeader(credentials));\n        }\n\n        // Perform the sync\n        return originalSync.call(model, method, model, options);\n    };\n}));\n","// MarionetteJS (Backbone.Marionette)\n// ----------------------------------\n// v2.2.0\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://marionettejs.com\n\n\n/*!\n * Includes BabySitter\n * https://github.com/marionettejs/backbone.babysitter/\n *\n * Includes Wreqr\n * https://github.com/marionettejs/backbone.wreqr/\n */\n\n\n(function(root, factory) {\n\n  /* istanbul ignore next */\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return (root.Marionette = factory(root, Backbone, _));\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require('backbone');\n    var _ = require('underscore');\n    module.exports = factory(root, Backbone, _);\n  } else {\n    root.Marionette = factory(root, root.Backbone, root._);\n  }\n\n}(this, function(root, Backbone, _) {\n  'use strict';\n\n  /* istanbul ignore next */\n  // Backbone.BabySitter\n  // -------------------\n  // v0.1.4\n  //\n  // Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n  // Distributed under MIT license\n  //\n  // http://github.com/marionettejs/backbone.babysitter\n  (function(Backbone, _) {\n    \"use strict\";\n    var previousChildViewContainer = Backbone.ChildViewContainer;\n    // BabySitter.ChildViewContainer\n    // -----------------------------\n    //\n    // Provide a container to store, retrieve and\n    // shut down child views.\n    Backbone.ChildViewContainer = function(Backbone, _) {\n      // Container Constructor\n      // ---------------------\n      var Container = function(views) {\n        this._views = {};\n        this._indexByModel = {};\n        this._indexByCustom = {};\n        this._updateLength();\n        _.each(views, this.add, this);\n      };\n      // Container Methods\n      // -----------------\n      _.extend(Container.prototype, {\n        // Add a view to this container. Stores the view\n        // by `cid` and makes it searchable by the model\n        // cid (and model itself). Optionally specify\n        // a custom key to store an retrieve the view.\n        add: function(view, customIndex) {\n          var viewCid = view.cid;\n          // store the view\n          this._views[viewCid] = view;\n          // index it by model\n          if (view.model) {\n            this._indexByModel[view.model.cid] = viewCid;\n          }\n          // index by custom\n          if (customIndex) {\n            this._indexByCustom[customIndex] = viewCid;\n          }\n          this._updateLength();\n          return this;\n        },\n        // Find a view by the model that was attached to\n        // it. Uses the model's `cid` to find it.\n        findByModel: function(model) {\n          return this.findByModelCid(model.cid);\n        },\n        // Find a view by the `cid` of the model that was attached to\n        // it. Uses the model's `cid` to find the view `cid` and\n        // retrieve the view using it.\n        findByModelCid: function(modelCid) {\n          var viewCid = this._indexByModel[modelCid];\n          return this.findByCid(viewCid);\n        },\n        // Find a view by a custom indexer.\n        findByCustom: function(index) {\n          var viewCid = this._indexByCustom[index];\n          return this.findByCid(viewCid);\n        },\n        // Find by index. This is not guaranteed to be a\n        // stable index.\n        findByIndex: function(index) {\n          return _.values(this._views)[index];\n        },\n        // retrieve a view by its `cid` directly\n        findByCid: function(cid) {\n          return this._views[cid];\n        },\n        // Remove a view\n        remove: function(view) {\n          var viewCid = view.cid;\n          // delete model index\n          if (view.model) {\n            delete this._indexByModel[view.model.cid];\n          }\n          // delete custom index\n          _.any(this._indexByCustom, function(cid, key) {\n            if (cid === viewCid) {\n              delete this._indexByCustom[key];\n              return true;\n            }\n          }, this);\n          // remove the view from the container\n          delete this._views[viewCid];\n          // update the length\n          this._updateLength();\n          return this;\n        },\n        // Call a method on every view in the container,\n        // passing parameters to the call method one at a\n        // time, like `function.call`.\n        call: function(method) {\n          this.apply(method, _.tail(arguments));\n        },\n        // Apply a method on every view in the container,\n        // passing parameters to the call method one at a\n        // time, like `function.apply`.\n        apply: function(method, args) {\n          _.each(this._views, function(view) {\n            if (_.isFunction(view[method])) {\n              view[method].apply(view, args || []);\n            }\n          });\n        },\n        // Update the `.length` attribute on this container\n        _updateLength: function() {\n          this.length = _.size(this._views);\n        }\n      });\n      // Borrowing this code from Backbone.Collection:\n      // http://backbonejs.org/docs/backbone.html#section-106\n      //\n      // Mix in methods from Underscore, for iteration, and other\n      // collection related features.\n      var methods = [ \"forEach\", \"each\", \"map\", \"find\", \"detect\", \"filter\", \"select\", \"reject\", \"every\", \"all\", \"some\", \"any\", \"include\", \"contains\", \"invoke\", \"toArray\", \"first\", \"initial\", \"rest\", \"last\", \"without\", \"isEmpty\", \"pluck\" ];\n      _.each(methods, function(method) {\n        Container.prototype[method] = function() {\n          var views = _.values(this._views);\n          var args = [ views ].concat(_.toArray(arguments));\n          return _[method].apply(_, args);\n        };\n      });\n      // return the public API\n      return Container;\n    }(Backbone, _);\n    Backbone.ChildViewContainer.VERSION = \"0.1.4\";\n    Backbone.ChildViewContainer.noConflict = function() {\n      Backbone.ChildViewContainer = previousChildViewContainer;\n      return this;\n    };\n    return Backbone.ChildViewContainer;\n  })(Backbone, _);\n\n  /* istanbul ignore next */\n  // Backbone.Wreqr (Backbone.Marionette)\n  // ----------------------------------\n  // v1.3.1\n  //\n  // Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n  // Distributed under MIT license\n  //\n  // http://github.com/marionettejs/backbone.wreqr\n  (function(Backbone, _) {\n    \"use strict\";\n    var previousWreqr = Backbone.Wreqr;\n    var Wreqr = Backbone.Wreqr = {};\n    Backbone.Wreqr.VERSION = \"1.3.1\";\n    Backbone.Wreqr.noConflict = function() {\n      Backbone.Wreqr = previousWreqr;\n      return this;\n    };\n    // Handlers\n    // --------\n    // A registry of functions to call, given a name\n    Wreqr.Handlers = function(Backbone, _) {\n      \"use strict\";\n      // Constructor\n      // -----------\n      var Handlers = function(options) {\n        this.options = options;\n        this._wreqrHandlers = {};\n        if (_.isFunction(this.initialize)) {\n          this.initialize(options);\n        }\n      };\n      Handlers.extend = Backbone.Model.extend;\n      // Instance Members\n      // ----------------\n      _.extend(Handlers.prototype, Backbone.Events, {\n        // Add multiple handlers using an object literal configuration\n        setHandlers: function(handlers) {\n          _.each(handlers, function(handler, name) {\n            var context = null;\n            if (_.isObject(handler) && !_.isFunction(handler)) {\n              context = handler.context;\n              handler = handler.callback;\n            }\n            this.setHandler(name, handler, context);\n          }, this);\n        },\n        // Add a handler for the given name, with an\n        // optional context to run the handler within\n        setHandler: function(name, handler, context) {\n          var config = {\n            callback: handler,\n            context: context\n          };\n          this._wreqrHandlers[name] = config;\n          this.trigger(\"handler:add\", name, handler, context);\n        },\n        // Determine whether or not a handler is registered\n        hasHandler: function(name) {\n          return !!this._wreqrHandlers[name];\n        },\n        // Get the currently registered handler for\n        // the specified name. Throws an exception if\n        // no handler is found.\n        getHandler: function(name) {\n          var config = this._wreqrHandlers[name];\n          if (!config) {\n            return;\n          }\n          return function() {\n            var args = Array.prototype.slice.apply(arguments);\n            return config.callback.apply(config.context, args);\n          };\n        },\n        // Remove a handler for the specified name\n        removeHandler: function(name) {\n          delete this._wreqrHandlers[name];\n        },\n        // Remove all handlers from this registry\n        removeAllHandlers: function() {\n          this._wreqrHandlers = {};\n        }\n      });\n      return Handlers;\n    }(Backbone, _);\n    // Wreqr.CommandStorage\n    // --------------------\n    //\n    // Store and retrieve commands for execution.\n    Wreqr.CommandStorage = function() {\n      \"use strict\";\n      // Constructor function\n      var CommandStorage = function(options) {\n        this.options = options;\n        this._commands = {};\n        if (_.isFunction(this.initialize)) {\n          this.initialize(options);\n        }\n      };\n      // Instance methods\n      _.extend(CommandStorage.prototype, Backbone.Events, {\n        // Get an object literal by command name, that contains\n        // the `commandName` and the `instances` of all commands\n        // represented as an array of arguments to process\n        getCommands: function(commandName) {\n          var commands = this._commands[commandName];\n          // we don't have it, so add it\n          if (!commands) {\n            // build the configuration\n            commands = {\n              command: commandName,\n              instances: []\n            };\n            // store it\n            this._commands[commandName] = commands;\n          }\n          return commands;\n        },\n        // Add a command by name, to the storage and store the\n        // args for the command\n        addCommand: function(commandName, args) {\n          var command = this.getCommands(commandName);\n          command.instances.push(args);\n        },\n        // Clear all commands for the given `commandName`\n        clearCommands: function(commandName) {\n          var command = this.getCommands(commandName);\n          command.instances = [];\n        }\n      });\n      return CommandStorage;\n    }();\n    // Wreqr.Commands\n    // --------------\n    //\n    // A simple command pattern implementation. Register a command\n    // handler and execute it.\n    Wreqr.Commands = function(Wreqr) {\n      \"use strict\";\n      return Wreqr.Handlers.extend({\n        // default storage type\n        storageType: Wreqr.CommandStorage,\n        constructor: function(options) {\n          this.options = options || {};\n          this._initializeStorage(this.options);\n          this.on(\"handler:add\", this._executeCommands, this);\n          var args = Array.prototype.slice.call(arguments);\n          Wreqr.Handlers.prototype.constructor.apply(this, args);\n        },\n        // Execute a named command with the supplied args\n        execute: function(name, args) {\n          name = arguments[0];\n          args = Array.prototype.slice.call(arguments, 1);\n          if (this.hasHandler(name)) {\n            this.getHandler(name).apply(this, args);\n          } else {\n            this.storage.addCommand(name, args);\n          }\n        },\n        // Internal method to handle bulk execution of stored commands\n        _executeCommands: function(name, handler, context) {\n          var command = this.storage.getCommands(name);\n          // loop through and execute all the stored command instances\n          _.each(command.instances, function(args) {\n            handler.apply(context, args);\n          });\n          this.storage.clearCommands(name);\n        },\n        // Internal method to initialize storage either from the type's\n        // `storageType` or the instance `options.storageType`.\n        _initializeStorage: function(options) {\n          var storage;\n          var StorageType = options.storageType || this.storageType;\n          if (_.isFunction(StorageType)) {\n            storage = new StorageType();\n          } else {\n            storage = StorageType;\n          }\n          this.storage = storage;\n        }\n      });\n    }(Wreqr);\n    // Wreqr.RequestResponse\n    // ---------------------\n    //\n    // A simple request/response implementation. Register a\n    // request handler, and return a response from it\n    Wreqr.RequestResponse = function(Wreqr) {\n      \"use strict\";\n      return Wreqr.Handlers.extend({\n        request: function() {\n          var name = arguments[0];\n          var args = Array.prototype.slice.call(arguments, 1);\n          if (this.hasHandler(name)) {\n            return this.getHandler(name).apply(this, args);\n          }\n        }\n      });\n    }(Wreqr);\n    // Event Aggregator\n    // ----------------\n    // A pub-sub object that can be used to decouple various parts\n    // of an application through event-driven architecture.\n    Wreqr.EventAggregator = function(Backbone, _) {\n      \"use strict\";\n      var EA = function() {};\n      // Copy the `extend` function used by Backbone's classes\n      EA.extend = Backbone.Model.extend;\n      // Copy the basic Backbone.Events on to the event aggregator\n      _.extend(EA.prototype, Backbone.Events);\n      return EA;\n    }(Backbone, _);\n    // Wreqr.Channel\n    // --------------\n    //\n    // An object that wraps the three messaging systems:\n    // EventAggregator, RequestResponse, Commands\n    Wreqr.Channel = function(Wreqr) {\n      \"use strict\";\n      var Channel = function(channelName) {\n        this.vent = new Backbone.Wreqr.EventAggregator();\n        this.reqres = new Backbone.Wreqr.RequestResponse();\n        this.commands = new Backbone.Wreqr.Commands();\n        this.channelName = channelName;\n      };\n      _.extend(Channel.prototype, {\n        // Remove all handlers from the messaging systems of this channel\n        reset: function() {\n          this.vent.off();\n          this.vent.stopListening();\n          this.reqres.removeAllHandlers();\n          this.commands.removeAllHandlers();\n          return this;\n        },\n        // Connect a hash of events; one for each messaging system\n        connectEvents: function(hash, context) {\n          this._connect(\"vent\", hash, context);\n          return this;\n        },\n        connectCommands: function(hash, context) {\n          this._connect(\"commands\", hash, context);\n          return this;\n        },\n        connectRequests: function(hash, context) {\n          this._connect(\"reqres\", hash, context);\n          return this;\n        },\n        // Attach the handlers to a given message system `type`\n        _connect: function(type, hash, context) {\n          if (!hash) {\n            return;\n          }\n          context = context || this;\n          var method = type === \"vent\" ? \"on\" : \"setHandler\";\n          _.each(hash, function(fn, eventName) {\n            this[type][method](eventName, _.bind(fn, context));\n          }, this);\n        }\n      });\n      return Channel;\n    }(Wreqr);\n    // Wreqr.Radio\n    // --------------\n    //\n    // An object that lets you communicate with many channels.\n    Wreqr.radio = function(Wreqr) {\n      \"use strict\";\n      var Radio = function() {\n        this._channels = {};\n        this.vent = {};\n        this.commands = {};\n        this.reqres = {};\n        this._proxyMethods();\n      };\n      _.extend(Radio.prototype, {\n        channel: function(channelName) {\n          if (!channelName) {\n            throw new Error(\"Channel must receive a name\");\n          }\n          return this._getChannel(channelName);\n        },\n        _getChannel: function(channelName) {\n          var channel = this._channels[channelName];\n          if (!channel) {\n            channel = new Wreqr.Channel(channelName);\n            this._channels[channelName] = channel;\n          }\n          return channel;\n        },\n        _proxyMethods: function() {\n          _.each([ \"vent\", \"commands\", \"reqres\" ], function(system) {\n            _.each(messageSystems[system], function(method) {\n              this[system][method] = proxyMethod(this, system, method);\n            }, this);\n          }, this);\n        }\n      });\n      var messageSystems = {\n        vent: [ \"on\", \"off\", \"trigger\", \"once\", \"stopListening\", \"listenTo\", \"listenToOnce\" ],\n        commands: [ \"execute\", \"setHandler\", \"setHandlers\", \"removeHandler\", \"removeAllHandlers\" ],\n        reqres: [ \"request\", \"setHandler\", \"setHandlers\", \"removeHandler\", \"removeAllHandlers\" ]\n      };\n      var proxyMethod = function(radio, system, method) {\n        return function(channelName) {\n          var messageSystem = radio._getChannel(channelName)[system];\n          var args = Array.prototype.slice.call(arguments, 1);\n          return messageSystem[method].apply(messageSystem, args);\n        };\n      };\n      return new Radio();\n    }(Wreqr);\n    return Backbone.Wreqr;\n  })(Backbone, _);\n\n  var previousMarionette = root.Marionette;\n\n  var Marionette = Backbone.Marionette = {};\n\n  Marionette.VERSION = '2.2.0';\n\n  Marionette.noConflict = function() {\n    root.Marionette = previousMarionette;\n    return this;\n  };\n\n  Backbone.Marionette = Marionette;\n\n  // Get the Deferred creator for later use\n  Marionette.Deferred = Backbone.$.Deferred;\n\n  /* jshint unused: false */\n  \n  // Helpers\n  // -------\n  \n  // For slicing `arguments` in functions\n  var slice = Array.prototype.slice;\n  \n  // Marionette.extend\n  // -----------------\n  \n  // Borrow the Backbone `extend` method so we can use it as needed\n  Marionette.extend = Backbone.Model.extend;\n  \n  // Marionette.getOption\n  // --------------------\n  \n  // Retrieve an object, function or other value from a target\n  // object or its `options`, with `options` taking precedence.\n  Marionette.getOption = function(target, optionName) {\n    if (!target || !optionName) { return; }\n    var value;\n  \n    if (target.options && (target.options[optionName] !== undefined)) {\n      value = target.options[optionName];\n    } else {\n      value = target[optionName];\n    }\n  \n    return value;\n  };\n  \n  // Proxy `Marionette.getOption`\n  Marionette.proxyGetOption = function(optionName) {\n    return Marionette.getOption(this, optionName);\n  };\n  \n  // Marionette.normalizeMethods\n  // ----------------------\n  \n  // Pass in a mapping of events => functions or function names\n  // and return a mapping of events => functions\n  Marionette.normalizeMethods = function(hash) {\n    var normalizedHash = {};\n    _.each(hash, function(method, name) {\n      if (!_.isFunction(method)) {\n        method = this[method];\n      }\n      if (!method) {\n        return;\n      }\n      normalizedHash[name] = method;\n    }, this);\n    return normalizedHash;\n  };\n  \n  // utility method for parsing @ui. syntax strings\n  // into associated selector\n  Marionette.normalizeUIString = function(uiString, ui) {\n    return uiString.replace(/@ui\\.[a-zA-Z_$0-9]*/g, function(r) {\n      return ui[r.slice(4)];\n    });\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector.\n  // Returns a new, non-mutated, parsed events hash.\n  Marionette.normalizeUIKeys = function(hash, ui) {\n    if (typeof(hash) === 'undefined') {\n      return;\n    }\n  \n    hash = _.clone(hash);\n  \n    _.each(_.keys(hash), function(key) {\n      var normalizedKey = Marionette.normalizeUIString(key, ui);\n      if (normalizedKey !== key) {\n        hash[normalizedKey] = hash[key];\n        delete hash[key];\n      }\n    });\n  \n    return hash;\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given value for regions\n  // swaps the @ui with the associated selector\n  Marionette.normalizeUIValues = function(hash, ui) {\n    if (typeof(hash) === 'undefined') {\n      return;\n    }\n  \n    _.each(hash, function(val, key) {\n      if (_.isString(val)) {\n        hash[key] = Marionette.normalizeUIString(val, ui);\n      }\n    });\n  \n    return hash;\n  };\n  \n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-121\n  Marionette.actAsCollection = function(object, listProperty) {\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n  \n    _.each(methods, function(method) {\n      object[method] = function() {\n        var list = _.values(_.result(this, listProperty));\n        var args = [list].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  };\n  \n  // Trigger an event and/or a corresponding method name. Examples:\n  //\n  // `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n  // call the \"onFoo\" method.\n  //\n  // `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n  // call the \"onFooBar\" method.\n  Marionette.triggerMethod = function(event) {\n  \n    // split the event name on the \":\"\n    var splitter = /(^|:)(\\w)/gi;\n  \n    // take the event section (\"section1:section2:section3\")\n    // and turn it in to uppercase name\n    function getEventName(match, prefix, eventName) {\n      return eventName.toUpperCase();\n    }\n  \n    // get the method name from the event name\n    var methodName = 'on' + event.replace(splitter, getEventName);\n    var method = this[methodName];\n    var result;\n  \n    // call the onMethodName if it exists\n    if (_.isFunction(method)) {\n      // pass all arguments, except the event name\n      result = method.apply(this, _.tail(arguments));\n    }\n  \n    // trigger the event, if a trigger method exists\n    if (_.isFunction(this.trigger)) {\n      this.trigger.apply(this, arguments);\n    }\n  \n    return result;\n  };\n  \n  // triggerMethodOn invokes triggerMethod on a specific context\n  //\n  // e.g. `Marionette.triggerMethodOn(view, 'show')`\n  // will trigger a \"show\" event or invoke onShow the view.\n  Marionette.triggerMethodOn = function(context, event) {\n    var args = _.tail(arguments, 2);\n    var fnc;\n  \n    if (_.isFunction(context.triggerMethod)) {\n      fnc = context.triggerMethod;\n    } else {\n      fnc = Marionette.triggerMethod;\n    }\n  \n    return fnc.apply(context, [event].concat(args));\n  };\n  \n  // DOMRefresh\n  // ----------\n  //\n  // Monitor a view's state, and after it has been rendered and shown\n  // in the DOM, trigger a \"dom:refresh\" event every time it is\n  // re-rendered.\n  \n  Marionette.MonitorDOMRefresh = (function(documentElement) {\n    // track when the view has been shown in the DOM,\n    // using a Marionette.Region (or by other means of triggering \"show\")\n    function handleShow(view) {\n      view._isShown = true;\n      triggerDOMRefresh(view);\n    }\n  \n    // track when the view has been rendered\n    function handleRender(view) {\n      view._isRendered = true;\n      triggerDOMRefresh(view);\n    }\n  \n    // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n    function triggerDOMRefresh(view) {\n      if (view._isShown && view._isRendered && isInDOM(view)) {\n        if (_.isFunction(view.triggerMethod)) {\n          view.triggerMethod('dom:refresh');\n        }\n      }\n    }\n  \n    function isInDOM(view) {\n      return Backbone.$.contains(documentElement, view.el);\n    }\n  \n    // Export public API\n    return function(view) {\n      view.listenTo(view, 'show', function() {\n        handleShow(view);\n      });\n  \n      view.listenTo(view, 'render', function() {\n        handleRender(view);\n      });\n    };\n  })(document.documentElement);\n  \n\n  /* jshint maxparams: 5 */\n  \n  // Marionette.bindEntityEvents & unbindEntityEvents\n  // ---------------------------\n  //\n  // These methods are used to bind/unbind a backbone \"entity\" (collection/model)\n  // to methods on a target object.\n  //\n  // The first parameter, `target`, must have a `listenTo` method from the\n  // EventBinder object.\n  //\n  // The second parameter is the entity (Backbone.Model or Backbone.Collection)\n  // to bind the events from.\n  //\n  // The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n  // configuration. Multiple handlers can be separated by a space. A\n  // function can be supplied instead of a string handler name.\n  \n  (function(Marionette) {\n    'use strict';\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function bindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n  \n        var method = target[methodName];\n        if (!method) {\n          throw new Marionette.Error('Method \"' + methodName +\n            '\" was configured as an event handler, but does not exist.');\n        }\n  \n        target.listenTo(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function bindToFunction(target, entity, evt, method) {\n      target.listenTo(entity, evt, method);\n    }\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function unbindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n        var method = target[methodName];\n        target.stopListening(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function unbindToFunction(target, entity, evt, method) {\n      target.stopListening(entity, evt, method);\n    }\n  \n  \n    // generic looping function\n    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {\n      if (!entity || !bindings) { return; }\n  \n      // type-check bindings\n      if (!_.isFunction(bindings) && !_.isObject(bindings)) {\n        throw new Marionette.Error({\n          message: 'Bindings must be an object or function.',\n          url: 'marionette.functions.html#marionettebindentityevents'\n        });\n      }\n  \n      // allow the bindings to be a function\n      if (_.isFunction(bindings)) {\n        bindings = bindings.call(target);\n      }\n  \n      // iterate the bindings and bind them\n      _.each(bindings, function(methods, evt) {\n  \n        // allow for a function as the handler,\n        // or a list of event names as a string\n        if (_.isFunction(methods)) {\n          functionCallback(target, entity, evt, methods);\n        } else {\n          stringCallback(target, entity, evt, methods);\n        }\n  \n      });\n    }\n  \n    // Export Public API\n    Marionette.bindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n    };\n  \n    Marionette.unbindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n    };\n  \n    // Proxy `bindEntityEvents`\n    Marionette.proxyBindEntityEvents = function(entity, bindings) {\n      return Marionette.bindEntityEvents(this, entity, bindings);\n    };\n  \n    // Proxy `unbindEntityEvents`\n    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {\n      return Marionette.unbindEntityEvents(this, entity, bindings);\n    };\n  })(Marionette);\n  \n\n  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n  \n  Marionette.Error = Marionette.extend.call(Error, {\n    urlRoot: 'http://marionettejs.com/docs/' + Marionette.VERSION + '/',\n  \n    constructor: function(message, options) {\n      if (_.isObject(message)) {\n        options = message;\n        message = options.message;\n      } else if (!options) {\n        options = {};\n      }\n  \n      var error = Error.call(this, message);\n      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n  \n      this.captureStackTrace();\n  \n      if (options.url) {\n        this.url = this.urlRoot + options.url;\n      }\n    },\n  \n    captureStackTrace: function() {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, Marionette.Error);\n      }\n    },\n  \n    toString: function() {\n      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n    }\n  });\n  \n  Marionette.Error.extend = Marionette.extend;\n  \n  // Callbacks\n  // ---------\n  \n  // A simple way of managing a collection of callbacks\n  // and executing them at a later point in time, using jQuery's\n  // `Deferred` object.\n  Marionette.Callbacks = function() {\n    this._deferred = Marionette.Deferred();\n    this._callbacks = [];\n  };\n  \n  _.extend(Marionette.Callbacks.prototype, {\n  \n    // Add a callback to be executed. Callbacks added here are\n    // guaranteed to execute, even if they are added after the\n    // `run` method is called.\n    add: function(callback, contextOverride) {\n      var promise = _.result(this._deferred, 'promise');\n  \n      this._callbacks.push({cb: callback, ctx: contextOverride});\n  \n      promise.then(function(args) {\n        if (contextOverride){ args.context = contextOverride; }\n        callback.call(args.context, args.options);\n      });\n    },\n  \n    // Run all registered callbacks with the context specified.\n    // Additional callbacks can be added after this has been run\n    // and they will still be executed.\n    run: function(options, context) {\n      this._deferred.resolve({\n        options: options,\n        context: context\n      });\n    },\n  \n    // Resets the list of callbacks to be run, allowing the same list\n    // to be run multiple times - whenever the `run` method is called.\n    reset: function() {\n      var callbacks = this._callbacks;\n      this._deferred = Marionette.Deferred();\n      this._callbacks = [];\n  \n      _.each(callbacks, function(cb) {\n        this.add(cb.cb, cb.ctx);\n      }, this);\n    }\n  });\n  \n  // Marionette Controller\n  // ---------------------\n  //\n  // A multi-purpose object to use as a controller for\n  // modules and routers, and as a mediator for workflow\n  // and coordination of other objects, views, and more.\n  Marionette.Controller = function(options) {\n    this.options = options || {};\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(this.options);\n    }\n  };\n  \n  Marionette.Controller.extend = Marionette.extend;\n  \n  // Controller Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Controller.prototype, Backbone.Events, {\n    destroy: function() {\n      var args = slice.call(arguments);\n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n  \n      this.stopListening();\n      this.off();\n      return this;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  \n  });\n  \n  // Marionette Object\n  // ---------------------\n  //\n  // A Base Class that other Classes should descend from.\n  // Object borrows many conventions and utilities from Backbone.\n  Marionette.Object = function(options) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n  \n    this.initialize.apply(this, arguments);\n  };\n  \n  Marionette.Object.extend = Marionette.extend;\n  \n  // Object Methods\n  // --------------\n  \n  _.extend(Marionette.Object.prototype, {\n  \n    //this is a noop method intended to be overridden by classes that extend from this base\n    initialize: function() {},\n  \n    destroy: function() {\n      this.triggerMethod('before:destroy');\n      this.triggerMethod('destroy');\n      this.stopListening();\n    },\n  \n    // Import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `unbindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Object.prototype, Backbone.Events);\n  \n  /* jshint maxcomplexity: 10, maxstatements: 29 */\n  \n  // Region\n  // ------\n  //\n  // Manage the visual regions of your composite application. See\n  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n  \n  Marionette.Region = function(options) {\n    this.options = options || {};\n    this.el = this.getOption('el');\n  \n    // Handle when this.el is passed in as a $ wrapped element.\n    this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n  \n    if (!this.el) {\n      throw new Marionette.Error({\n        name: 'NoElError',\n        message: 'An \"el\" must be specified for a region.'\n      });\n    }\n  \n    this.$el = this.getEl(this.el);\n  \n    if (this.initialize) {\n      var args = slice.apply(arguments);\n      this.initialize.apply(this, args);\n    }\n  };\n  \n  \n  // Region Class methods\n  // -------------------\n  \n  _.extend(Marionette.Region, {\n  \n    // Build an instance of a region by passing in a configuration object\n    // and a default region class to use if none is specified in the config.\n    //\n    // The config object should either be a string as a jQuery DOM selector,\n    // a Region class directly, or an object literal that specifies both\n    // a selector and regionClass:\n    //\n    // ```js\n    // {\n    //   selector: \"#foo\",\n    //   regionClass: MyCustomRegion\n    // }\n    // ```\n    //\n    buildRegion: function(regionConfig, DefaultRegionClass) {\n      if (_.isString(regionConfig)) {\n        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);\n      }\n  \n      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {\n        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);\n      }\n  \n      if (_.isFunction(regionConfig)) {\n        return this._buildRegionFromRegionClass(regionConfig);\n      }\n  \n      throw new Marionette.Error({\n        message: 'Improper region configuration type.',\n        url: 'marionette.region.html#region-configuration-types'\n      });\n    },\n  \n    // Build the region from a string selector like '#foo-region'\n    _buildRegionFromSelector: function(selector, DefaultRegionClass) {\n      return new DefaultRegionClass({ el: selector });\n    },\n  \n    // Build the region from a configuration object\n    // ```js\n    // { selector: '#foo', regionClass: FooRegion }\n    // ```\n    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {\n      var RegionClass = regionConfig.regionClass || DefaultRegionClass;\n      var options = _.omit(regionConfig, 'selector', 'regionClass');\n  \n      if (regionConfig.selector && !options.el) {\n        options.el = regionConfig.selector;\n      }\n  \n      var region = new RegionClass(options);\n  \n      // override the `getEl` function if we have a parentEl\n      // this must be overridden to ensure the selector is found\n      // on the first use of the region. if we try to assign the\n      // region's `el` to `parentEl.find(selector)` in the object\n      // literal to build the region, the element will not be\n      // guaranteed to be in the DOM already, and will cause problems\n      if (regionConfig.parentEl) {\n        region.getEl = function(el) {\n          if (_.isObject(el)) {\n            return Backbone.$(el);\n          }\n          var parentEl = regionConfig.parentEl;\n          if (_.isFunction(parentEl)) {\n            parentEl = parentEl();\n          }\n          return parentEl.find(el);\n        };\n      }\n  \n      return region;\n    },\n  \n    // Build the region directly from a given `RegionClass`\n    _buildRegionFromRegionClass: function(RegionClass) {\n      return new RegionClass();\n    }\n  \n  });\n  \n  // Region Instance Methods\n  // -----------------------\n  \n  _.extend(Marionette.Region.prototype, Backbone.Events, {\n  \n    // Displays a backbone view instance inside of the region.\n    // Handles calling the `render` method for you. Reads content\n    // directly from the `el` attribute. Also calls an optional\n    // `onShow` and `onDestroy` method on your view, just after showing\n    // or just before destroying the view, respectively.\n    // The `preventDestroy` option can be used to prevent a view from\n    // the old view being destroyed on show.\n    // The `forceShow` option can be used to force a view to be\n    // re-rendered if it's already shown in the region.\n  \n    show: function(view, options){\n      this._ensureElement();\n  \n      var showOptions = options || {};\n      var isDifferentView = view !== this.currentView;\n      var preventDestroy =  !!showOptions.preventDestroy;\n      var forceShow = !!showOptions.forceShow;\n  \n      // we are only changing the view if there is a view to change to begin with\n      var isChangingView = !!this.currentView;\n  \n      // only destroy the view if we don't want to preventDestroy and the view is different\n      var _shouldDestroyView = !preventDestroy && isDifferentView;\n  \n      // show the view if the view is different or if you want to re-show the view\n      var _shouldShowView = isDifferentView || forceShow;\n  \n      if (isChangingView) {\n        this.triggerMethod('before:swapOut', this.currentView);\n      }\n  \n      if (_shouldDestroyView) {\n        this.empty();\n      }\n  \n      if (_shouldShowView) {\n  \n        // We need to listen for if a view is destroyed\n        // in a way other than through the region.\n        // If this happens we need to remove the reference\n        // to the currentView since once a view has been destroyed\n        // we can not reuse it.\n        view.once('destroy', _.bind(this.empty, this));\n        view.render();\n  \n        if (isChangingView) {\n          this.triggerMethod('before:swap', view);\n        }\n  \n        this.triggerMethod('before:show', view);\n        Marionette.triggerMethodOn(view, 'before:show');\n  \n        if (isChangingView) {\n          this.triggerMethod('swapOut', this.currentView);\n        }\n  \n        this.attachHtml(view);\n        this.currentView = view;\n  \n        if (isChangingView) {\n          this.triggerMethod('swap', view);\n        }\n  \n        this.triggerMethod('show', view);\n        Marionette.triggerMethodOn(view, 'show');\n  \n        return this;\n      }\n  \n      return this;\n    },\n  \n    _ensureElement: function(){\n      if (!_.isObject(this.el)) {\n        this.$el = this.getEl(this.el);\n        this.el = this.$el[0];\n      }\n  \n      if (!this.$el || this.$el.length === 0) {\n        throw new Marionette.Error('An \"el\" ' + this.$el.selector + ' must exist in DOM');\n      }\n    },\n  \n    // Override this method to change how the region finds the\n    // DOM element that it manages. Return a jQuery selector object.\n    getEl: function(el) {\n      return Backbone.$(el);\n    },\n  \n    // Override this method to change how the new view is\n    // appended to the `$el` that the region is managing\n    attachHtml: function(view) {\n      // empty the node and append new view\n      this.el.innerHTML='';\n      this.el.appendChild(view.el);\n    },\n  \n    // Destroy the current view, if there is one. If there is no\n    // current view, it does nothing and returns immediately.\n    empty: function() {\n      var view = this.currentView;\n  \n      // If there is no view in the region\n      // we should not remove anything\n      if (!view) { return; }\n  \n      this.triggerMethod('before:empty', view);\n      this._destroyView();\n      this.triggerMethod('empty', view);\n  \n      // Remove region pointer to the currentView\n      delete this.currentView;\n      return this;\n    },\n  \n    // call 'destroy' or 'remove', depending on which is found\n    // on the view (if showing a raw Backbone view or a Marionette View)\n    _destroyView: function() {\n      var view = this.currentView;\n  \n      if (view.destroy && !view.isDestroyed) {\n        view.destroy();\n      } else if (view.remove) {\n        view.remove();\n      }\n    },\n  \n    // Attach an existing view to the region. This\n    // will not call `render` or `onShow` for the new view,\n    // and will not replace the current HTML for the `el`\n    // of the region.\n    attachView: function(view) {\n      this.currentView = view;\n      return this;\n    },\n  \n    // Checks whether a view is currently present within\n    // the region. Returns `true` if there is and `false` if\n    // no view is present.\n    hasView: function() {\n      return !!this.currentView;\n    },\n  \n    // Reset the region by destroying any existing view and\n    // clearing out the cached `$el`. The next time a view\n    // is shown via this region, the region will re-query the\n    // DOM for the region's `el`.\n    reset: function() {\n      this.empty();\n  \n      if (this.$el) {\n        this.el = this.$el.selector;\n      }\n  \n      delete this.$el;\n      return this;\n    },\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n  \n  // Copy the `extend` function used by Backbone's classes\n  Marionette.Region.extend = Marionette.extend;\n  \n  // Marionette.RegionManager\n  // ------------------------\n  //\n  // Manage one or more related `Marionette.Region` objects.\n  Marionette.RegionManager = (function(Marionette) {\n  \n    var RegionManager = Marionette.Controller.extend({\n      constructor: function(options) {\n        this._regions = {};\n        Marionette.Controller.call(this, options);\n      },\n  \n      // Add multiple regions using an object literal or a\n      // function that returns an object literal, where\n      // each key becomes the region name, and each value is\n      // the region definition.\n      addRegions: function(regionDefinitions, defaults) {\n        if (_.isFunction(regionDefinitions)) {\n          regionDefinitions = regionDefinitions.apply(this, arguments);\n        }\n  \n        var regions = {};\n  \n        _.each(regionDefinitions, function(definition, name) {\n          if (_.isString(definition)) {\n            definition = {selector: definition};\n          }\n  \n          if (definition.selector) {\n            definition = _.defaults({}, definition, defaults);\n          }\n  \n          var region = this.addRegion(name, definition);\n          regions[name] = region;\n        }, this);\n  \n        return regions;\n      },\n  \n      // Add an individual region to the region manager,\n      // and return the region instance\n      addRegion: function(name, definition) {\n        var region;\n  \n        if (definition instanceof Marionette.Region) {\n          region = definition;\n        } else {\n          region = Marionette.Region.buildRegion(definition, Marionette.Region);\n        }\n  \n        this.triggerMethod('before:add:region', name, region);\n  \n        this._store(name, region);\n  \n        this.triggerMethod('add:region', name, region);\n        return region;\n      },\n  \n      // Get a region by name\n      get: function(name) {\n        return this._regions[name];\n      },\n  \n      // Gets all the regions contained within\n      // the `regionManager` instance.\n      getRegions: function(){\n        return _.clone(this._regions);\n      },\n  \n      // Remove a region by name\n      removeRegion: function(name) {\n        var region = this._regions[name];\n        this._remove(name, region);\n  \n        return region;\n      },\n  \n      // Empty all regions in the region manager, and\n      // remove them\n      removeRegions: function() {\n        var regions = this.getRegions();\n        _.each(this._regions, function(region, name) {\n          this._remove(name, region);\n        }, this);\n  \n        return regions;\n      },\n  \n      // Empty all regions in the region manager, but\n      // leave them attached\n      emptyRegions: function() {\n        var regions = this.getRegions();\n        _.each(regions, function(region) {\n          region.empty();\n        }, this);\n  \n        return regions;\n      },\n  \n      // Destroy all regions and shut down the region\n      // manager entirely\n      destroy: function() {\n        this.removeRegions();\n        return Marionette.Controller.prototype.destroy.apply(this, arguments);\n      },\n  \n      // internal method to store regions\n      _store: function(name, region) {\n        this._regions[name] = region;\n        this._setLength();\n      },\n  \n      // internal method to remove a region\n      _remove: function(name, region) {\n        this.triggerMethod('before:remove:region', name, region);\n        region.empty();\n        region.stopListening();\n        delete this._regions[name];\n        this._setLength();\n        this.triggerMethod('remove:region', name, region);\n      },\n  \n      // set the number of regions current held\n      _setLength: function() {\n        this.length = _.size(this._regions);\n      }\n  \n    });\n  \n    Marionette.actAsCollection(RegionManager.prototype, '_regions');\n  \n    return RegionManager;\n  })(Marionette);\n  \n\n  // Template Cache\n  // --------------\n  \n  // Manage templates stored in `<script>` blocks,\n  // caching them for faster access.\n  Marionette.TemplateCache = function(templateId) {\n    this.templateId = templateId;\n  };\n  \n  // TemplateCache object-level methods. Manage the template\n  // caches from these method calls instead of creating\n  // your own TemplateCache instances\n  _.extend(Marionette.TemplateCache, {\n    templateCaches: {},\n  \n    // Get the specified template by id. Either\n    // retrieves the cached version, or loads it\n    // from the DOM.\n    get: function(templateId) {\n      var cachedTemplate = this.templateCaches[templateId];\n  \n      if (!cachedTemplate) {\n        cachedTemplate = new Marionette.TemplateCache(templateId);\n        this.templateCaches[templateId] = cachedTemplate;\n      }\n  \n      return cachedTemplate.load();\n    },\n  \n    // Clear templates from the cache. If no arguments\n    // are specified, clears all templates:\n    // `clear()`\n    //\n    // If arguments are specified, clears each of the\n    // specified templates from the cache:\n    // `clear(\"#t1\", \"#t2\", \"...\")`\n    clear: function() {\n      var i;\n      var args = slice.call(arguments);\n      var length = args.length;\n  \n      if (length > 0) {\n        for (i = 0; i < length; i++) {\n          delete this.templateCaches[args[i]];\n        }\n      } else {\n        this.templateCaches = {};\n      }\n    }\n  });\n  \n  // TemplateCache instance methods, allowing each\n  // template cache object to manage its own state\n  // and know whether or not it has been loaded\n  _.extend(Marionette.TemplateCache.prototype, {\n  \n    // Internal method to load the template\n    load: function() {\n      // Guard clause to prevent loading this template more than once\n      if (this.compiledTemplate) {\n        return this.compiledTemplate;\n      }\n  \n      // Load the template and compile it\n      var template = this.loadTemplate(this.templateId);\n      this.compiledTemplate = this.compileTemplate(template);\n  \n      return this.compiledTemplate;\n    },\n  \n    // Load a template from the DOM, by default. Override\n    // this method to provide your own template retrieval\n    // For asynchronous loading with AMD/RequireJS, consider\n    // using a template-loader plugin as described here:\n    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n    loadTemplate: function(templateId) {\n      var template = Backbone.$(templateId).html();\n  \n      if (!template || template.length === 0) {\n        throw new Marionette.Error({\n          name: 'NoTemplateError',\n          message: 'Could not find template: \"' + templateId + '\"'\n        });\n      }\n  \n      return template;\n    },\n  \n    // Pre-compile the template before caching it. Override\n    // this method if you do not need to pre-compile a template\n    // (JST / RequireJS for example) or if you want to change\n    // the template engine used (Handebars, etc).\n    compileTemplate: function(rawTemplate) {\n      return _.template(rawTemplate);\n    }\n  });\n  \n  // Renderer\n  // --------\n  \n  // Render a template with data by passing in the template\n  // selector and the data to render.\n  Marionette.Renderer = {\n  \n    // Render a template with data. The `template` parameter is\n    // passed to the `TemplateCache` object to retrieve the\n    // template function. Override this method to provide your own\n    // custom rendering and template handling for all of Marionette.\n    render: function(template, data) {\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'TemplateNotFoundError',\n          message: 'Cannot render the template since its false, null or undefined.'\n        });\n      }\n  \n      var templateFunc;\n      if (typeof template === 'function') {\n        templateFunc = template;\n      } else {\n        templateFunc = Marionette.TemplateCache.get(template);\n      }\n  \n      return templateFunc(data);\n    }\n  };\n  \n\n  /* jshint maxlen: 114, nonew: false */\n  // Marionette.View\n  // ---------------\n  \n  // The core view class that other Marionette views extend from.\n  Marionette.View = Backbone.View.extend({\n  \n    constructor: function(options) {\n      _.bindAll(this, 'render');\n  \n      // this exposes view options to the view initializer\n      // this is a backfill since backbone removed the assignment\n      // of this.options\n      // at some point however this may be removed\n      this.options = _.extend({}, _.result(this, 'options'), _.isFunction(options) ? options.call(this) : options);\n  \n      this._behaviors = Marionette.Behaviors(this);\n  \n      Backbone.View.apply(this, arguments);\n  \n      Marionette.MonitorDOMRefresh(this);\n      this.listenTo(this, 'show', this.onShowCalled);\n    },\n  \n    // Get the template for this view\n    // instance. You can set a `template` attribute in the view\n    // definition or pass a `template: \"whatever\"` parameter in\n    // to the constructor options.\n    getTemplate: function() {\n      return this.getOption('template');\n    },\n  \n    // Serialize a model by returning its attributes. Clones\n    // the attributes to allow modification.\n    serializeModel: function(model){\n      return model.toJSON.apply(model, slice.call(arguments, 1));\n    },\n  \n    // Mix in template helper methods. Looks for a\n    // `templateHelpers` attribute, which can either be an\n    // object literal, or a function that returns an object\n    // literal. All methods and attributes from this object\n    // are copies to the object passed in.\n    mixinTemplateHelpers: function(target) {\n      target = target || {};\n      var templateHelpers = this.getOption('templateHelpers');\n      if (_.isFunction(templateHelpers)) {\n        templateHelpers = templateHelpers.call(this);\n      }\n      return _.extend(target, templateHelpers);\n    },\n  \n    // normalize the keys of passed hash with the views `ui` selectors.\n    // `{\"@ui.foo\": \"bar\"}`\n    normalizeUIKeys: function(hash) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIKeys(hash, uiBindings || ui);\n    },\n  \n    // normalize the values of passed hash with the views `ui` selectors.\n    // `{foo: \"@ui.bar\"}`\n    normalizeUIValues: function(hash) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIValues(hash, uiBindings || ui);\n    },\n  \n    // Configure `triggers` to forward DOM events to view\n    // events. `triggers: {\"click .foo\": \"do:foo\"}`\n    configureTriggers: function() {\n      if (!this.triggers) { return; }\n  \n      var triggerEvents = {};\n  \n      // Allow `triggers` to be configured as a function\n      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n  \n      // Configure the triggers, prevent default\n      // action and stop propagation of DOM events\n      _.each(triggers, function(value, key) {\n        triggerEvents[key] = this._buildViewTrigger(value);\n      }, this);\n  \n      return triggerEvents;\n    },\n  \n    // Overriding Backbone.View's delegateEvents to handle\n    // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n    delegateEvents: function(events) {\n      this._delegateDOMEvents(events);\n      this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // internal method to delegate DOM events and triggers\n    _delegateDOMEvents: function(eventsArg) {\n      var events = eventsArg || this.events;\n      if (_.isFunction(events)) { events = events.call(this); }\n  \n      // normalize ui keys\n      events = this.normalizeUIKeys(events);\n      if(_.isUndefined(eventsArg)) {this.events = events;}\n  \n      var combinedEvents = {};\n  \n      // look up if this view has behavior events\n      var behaviorEvents = _.result(this, 'behaviorEvents') || {};\n      var triggers = this.configureTriggers();\n      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};\n  \n      // behavior events will be overriden by view events and or triggers\n      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);\n  \n      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n    },\n  \n    // Overriding Backbone.View's undelegateEvents to handle unbinding\n    // the `triggers`, `modelEvents`, and `collectionEvents` config\n    undelegateEvents: function() {\n      var args = slice.call(arguments);\n      Backbone.View.prototype.undelegateEvents.apply(this, args);\n  \n      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // Internal method, handles the `show` event.\n    onShowCalled: function() {},\n  \n    // Internal helper method to verify whether the view hasn't been destroyed\n    _ensureViewIsIntact: function() {\n      if (this.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + this.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Default `destroy` implementation, for removing a view from the\n    // DOM and unbinding it. Regions will call this method\n    // for you. You can specify an `onDestroy` method in your view to\n    // add custom code that is called after the view is destroyed.\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n  \n      var args = slice.call(arguments);\n  \n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n  \n      // mark as destroyed before doing the actual destroy, to\n      // prevent infinite loops within \"destroy\" event handlers\n      // that are trying to destroy other views\n      this.isDestroyed = true;\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n  \n      // unbind UI elements\n      this.unbindUIElements();\n  \n      // remove the view from the DOM\n      this.remove();\n  \n      // Call destroy on each behavior after\n      // destroying the view.\n      // This unbinds event listeners\n      // that behaviors have registerd for.\n      _.invoke(this._behaviors, 'destroy', args);\n  \n      return this;\n    },\n  \n    bindUIElements: function() {\n      this._bindUIElements();\n      _.invoke(this._behaviors, this._bindUIElements);\n    },\n  \n    // This method binds the elements specified in the \"ui\" hash inside the view's code with\n    // the associated jQuery selectors.\n    _bindUIElements: function() {\n      if (!this.ui) { return; }\n  \n      // store the ui hash in _uiBindings so they can be reset later\n      // and so re-rendering the view will be able to find the bindings\n      if (!this._uiBindings) {\n        this._uiBindings = this.ui;\n      }\n  \n      // get the bindings result, as a function or otherwise\n      var bindings = _.result(this, '_uiBindings');\n  \n      // empty the ui so we don't have anything to start with\n      this.ui = {};\n  \n      // bind each of the selectors\n      _.each(_.keys(bindings), function(key) {\n        var selector = bindings[key];\n        this.ui[key] = this.$(selector);\n      }, this);\n    },\n  \n    // This method unbinds the elements specified in the \"ui\" hash\n    unbindUIElements: function() {\n      this._unbindUIElements();\n      _.invoke(this._behaviors, this._unbindUIElements);\n    },\n  \n    _unbindUIElements: function() {\n      if (!this.ui || !this._uiBindings) { return; }\n  \n      // delete all of the existing ui bindings\n      _.each(this.ui, function($el, name) {\n        delete this.ui[name];\n      }, this);\n  \n      // reset the ui element to the original bindings configuration\n      this.ui = this._uiBindings;\n      delete this._uiBindings;\n    },\n  \n    // Internal method to create an event handler for a given `triggerDef` like\n    // 'click:foo'\n    _buildViewTrigger: function(triggerDef) {\n      var hasOptions = _.isObject(triggerDef);\n  \n      var options = _.defaults({}, (hasOptions ? triggerDef : {}), {\n        preventDefault: true,\n        stopPropagation: true\n      });\n  \n      var eventName = hasOptions ? options.event : triggerDef;\n  \n      return function(e) {\n        if (e) {\n          if (e.preventDefault && options.preventDefault) {\n            e.preventDefault();\n          }\n  \n          if (e.stopPropagation && options.stopPropagation) {\n            e.stopPropagation();\n          }\n        }\n  \n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n  \n        this.triggerMethod(eventName, args);\n      };\n    },\n  \n    setElement: function() {\n      var ret = Backbone.View.prototype.setElement.apply(this, arguments);\n  \n      // proxy behavior $el to the view's $el.\n      // This is needed because a view's $el proxy\n      // is not set until after setElement is called.\n      _.invoke(this._behaviors, 'proxyViewProperties', this);\n  \n      return ret;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: function() {\n      var args = arguments;\n      var triggerMethod = Marionette.triggerMethod;\n  \n      var ret = triggerMethod.apply(this, args);\n      _.each(this._behaviors, function(b) {\n        triggerMethod.apply(b, args);\n      });\n  \n      return ret;\n    },\n  \n    // Imports the \"normalizeMethods\" to transform hashes of\n    // events=>function references/names to a hash of events=>function references\n    normalizeMethods: Marionette.normalizeMethods,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `unbindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Item View\n  // ---------\n  \n  // A single item view implementation that contains code for rendering\n  // with underscore.js templates, serializing the view's model or collection,\n  // and calling several methods on extended views, such as `onRender`.\n  Marionette.ItemView = Marionette.View.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.View.prototype.constructor which allows overriding\n    constructor: function() {\n      Marionette.View.apply(this, arguments);\n    },\n  \n    // Serialize the model or collection for the view. If a model is\n    // found, the view's `serializeModel` is called. If a collection is found,\n    // each model in the collection is serialized by calling\n    // the view's `serializeCollection` and put into an `items` array in\n    // the resulting data. If both are found, defaults to the model.\n    // You can override the `serializeData` method in your own view definition,\n    // to provide custom serialization for your view's data.\n    serializeData: function(){\n      var data = {};\n  \n      if (this.model) {\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n      else if (this.collection) {\n        data = { items: _.partial(this.serializeCollection, this.collection).apply(this, arguments) };\n      }\n  \n      return data;\n    },\n  \n    // Serialize a collection by serializing each of its models.\n    serializeCollection: function(collection){\n      return collection.toJSON.apply(collection, slice.call(arguments, 1));\n    },\n  \n    // Render the view, defaulting to underscore.js templates.\n    // You can override this in your view definition to provide\n    // a very specific rendering for your view. In general, though,\n    // you should override the `Marionette.Renderer` object to\n    // change how Marionette renders views.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this.bindUIElements();\n  \n      this.triggerMethod('render', this);\n  \n      return this;\n    },\n  \n    // Internal method to render the template with the serialized data\n    // and template helpers via the `Marionette.Renderer` object.\n    // Throws an `UndefinedTemplateError` error if the template is\n    // any falsely value but literal `false`.\n    _renderTemplate: function() {\n      var template = this.getTemplate();\n  \n      // Allow template-less item views\n      if (template === false) {\n        return;\n      }\n  \n      if (!template) {\n        throw new Marionette.Error({\n          name: 'UndefinedTemplateError',\n          message: 'Cannot render the template since it is null or undefined.'\n        });\n      }\n  \n      // Add in entity data and template helpers\n      var data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      // Render and add to el\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      return this;\n    },\n  \n    // Attaches the content of a given view.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    },\n  \n    // Override the default destroy event to add a few\n    // more events that are triggered.\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n  \n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    }\n  });\n  \n  /* jshint maxstatements: 14 */\n  /* jshint maxlen: 200 */\n  \n  // Collection View\n  // ---------------\n  \n  // A view that iterates over a Backbone.Collection\n  // and renders an individual child view for each model.\n  Marionette.CollectionView = Marionette.View.extend({\n  \n    // used as the prefix for child view events\n    // that are forwarded through the collectionview\n    childViewEventPrefix: 'childview',\n  \n    // constructor\n    // option to pass `{sort: false}` to prevent the `CollectionView` from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function(options){\n      var initOptions = options || {};\n      this.sort = _.isUndefined(initOptions.sort) ? true : initOptions.sort;\n  \n      if (initOptions.collection && !(initOptions.collection instanceof Backbone.Collection)) {\n        throw new Marionette.Error('The Collection option passed to this view needs to be an instance of a Backbone.Collection');\n      }\n  \n      this.once('render', this._initialEvents);\n  \n      this._initChildViewStorage();\n  \n      Marionette.View.apply(this, arguments);\n  \n      this.initRenderBuffer();\n    },\n  \n    // Instead of inserting elements one by one into the page,\n    // it's much more performant to insert elements into a document\n    // fragment and then insert that document fragment into the page\n    initRenderBuffer: function() {\n      this.elBuffer = document.createDocumentFragment();\n      this._bufferedChildren = [];\n    },\n  \n    startBuffering: function() {\n      this.initRenderBuffer();\n      this.isBuffering = true;\n    },\n  \n    endBuffering: function() {\n      this.isBuffering = false;\n      this._triggerBeforeShowBufferedChildren();\n      this.attachBuffer(this, this.elBuffer);\n      this._triggerShowBufferedChildren();\n      this.initRenderBuffer();\n    },\n  \n    _triggerBeforeShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'before:show'));\n      }\n    },\n  \n    _triggerShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'show'));\n  \n        this._bufferedChildren = [];\n      }\n    },\n  \n    // Internal method for _.each loops to call `Marionette.triggerMethodOn` on\n    // a child view\n    _triggerMethodOnChild: function(event, childView) {\n      Marionette.triggerMethodOn(childView, event);\n    },\n  \n    // Configured the initial events that the collection view\n    // binds to.\n    _initialEvents: function() {\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this.render);\n  \n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Handle a child added to the collection\n    _onCollectionAdd: function(child) {\n      this.destroyEmptyView();\n      var ChildView = this.getChildView(child);\n      var index = this.collection.indexOf(child);\n      this.addChild(child, ChildView, index);\n    },\n  \n    // get the child view by model it holds, and remove it\n    _onCollectionRemove: function(model) {\n      var view = this.children.findByModel(model);\n      this.removeChildView(view);\n      this.checkEmpty();\n    },\n  \n    // Override from `Marionette.View` to trigger show on child views\n    onShowCalled: function() {\n      this.children.each(_.partial(this._triggerMethodOnChild, 'show'));\n    },\n  \n    // Render children views. Override this method to\n    // provide your own implementation of a render function for\n    // the collection view.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.triggerMethod('before:render', this);\n      this._renderChildren();\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    // Render view after sorting. Override this method to\n    // change how the view renders after a `sort` on the collection.\n    // An example of this would be to only `renderChildren` in a `CompositeView`\n    // rather than the full view.\n    resortView: function() {\n      this.render();\n    },\n  \n    // Internal method. This checks for any changes in the order of the collection.\n    // If the index of any view doesn't match, it will render.\n    _sortViews: function() {\n      // check for any changes in sort order of views\n      var orderChanged = this.collection.find(function(item, index){\n        var view = this.children.findByModel(item);\n        return !view || view._index !== index;\n      }, this);\n  \n      if (orderChanged) {\n        this.resortView();\n      }\n    },\n  \n    // Internal method. Separated so that CompositeView can have\n    // more control over events being triggered, around the rendering\n    // process\n    _renderChildren: function() {\n      this.destroyEmptyView();\n      this.destroyChildren();\n  \n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      } else {\n        this.triggerMethod('before:render:collection', this);\n        this.startBuffering();\n        this.showCollection();\n        this.endBuffering();\n        this.triggerMethod('render:collection', this);\n      }\n    },\n  \n    // Internal method to loop through collection and show each child view.\n    showCollection: function() {\n      var ChildView;\n      this.collection.each(function(child, index) {\n        ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }, this);\n    },\n  \n    // Internal method to show an empty view in place of\n    // a collection of child views, when the collection is empty\n    showEmptyView: function() {\n      var EmptyView = this.getEmptyView();\n  \n      if (EmptyView && !this._showingEmptyView) {\n        this.triggerMethod('before:render:empty');\n  \n        this._showingEmptyView = true;\n        var model = new Backbone.Model();\n        this.addEmptyView(model, EmptyView);\n  \n        this.triggerMethod('render:empty');\n      }\n    },\n  \n    // Internal method to destroy an existing emptyView instance\n    // if one exists. Called when a collection view has been\n    // rendered empty, and then a child is added to the collection.\n    destroyEmptyView: function() {\n      if (this._showingEmptyView) {\n        this.triggerMethod('before:remove:empty');\n  \n        this.destroyChildren();\n        delete this._showingEmptyView;\n  \n        this.triggerMethod('remove:empty');\n      }\n    },\n  \n    // Retrieve the empty view class\n    getEmptyView: function() {\n      return this.getOption('emptyView');\n    },\n  \n    // Render and show the emptyView. Similar to addChild method\n    // but \"child:added\" events are not fired, and the event from\n    // emptyView are not forwarded\n    addEmptyView: function(child, EmptyView) {\n  \n      // get the emptyViewOptions, falling back to childViewOptions\n      var emptyViewOptions = this.getOption('emptyViewOptions') ||\n                            this.getOption('childViewOptions');\n  \n      if (_.isFunction(emptyViewOptions)){\n        emptyViewOptions = emptyViewOptions.call(this);\n      }\n  \n      // build the empty view\n      var view = this.buildChildView(child, EmptyView, emptyViewOptions);\n  \n      // Proxy emptyView events\n      this.proxyChildEvents(view);\n  \n      // trigger the 'before:show' event on `view` if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'before:show');\n      }\n  \n      // Store the `emptyView` like a `childView` so we can properly\n      // remove and/or close it later\n      this.children.add(view);\n  \n      // Render it and show it\n      this.renderChildView(view, -1);\n  \n      // call the 'show' method if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n    },\n  \n    // Retrieve the `childView` class, either from `this.options.childView`\n    // or from the `childView` in the object definition. The \"options\"\n    // takes precedence.\n    // This method receives the model that will be passed to the instance\n    // created from this `childView`. Overriding methods may use the child\n    // to determine what `childView` class to return.\n    getChildView: function(child) {\n      var childView = this.getOption('childView');\n  \n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n  \n      return childView;\n    },\n  \n    // Render the child's view and add it to the\n    // HTML for the collection view at a given index.\n    // This will also update the indices of later views in the collection\n    // in order to keep the children in sync with the collection.\n    addChild: function(child, ChildView, index) {\n      var childViewOptions = this.getOption('childViewOptions');\n      if (_.isFunction(childViewOptions)) {\n        childViewOptions = childViewOptions.call(this, child, index);\n      }\n  \n      var view = this.buildChildView(child, ChildView, childViewOptions);\n  \n      // increment indices of views after this one\n      this._updateIndices(view, true, index);\n  \n      this._addChildView(view, index);\n  \n      return view;\n    },\n  \n    // Internal method. This decrements or increments the indices of views after the\n    // added/removed view to keep in sync with the collection.\n    _updateIndices: function(view, increment, index) {\n      if (!this.sort) {\n        return;\n      }\n  \n      if (increment) {\n        // assign the index to the view\n        view._index = index;\n  \n        // increment the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index++;\n          }\n        });\n      }\n      else {\n        // decrement the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index--;\n          }\n        });\n      }\n    },\n  \n  \n    // Internal Method. Add the view to children and render it at\n    // the given index.\n    _addChildView: function(view, index) {\n      // set up the child view event forwarding\n      this.proxyChildEvents(view);\n  \n      this.triggerMethod('before:add:child', view);\n  \n      // Store the child view itself so we can properly\n      // remove and/or destroy it later\n      this.children.add(view);\n      this.renderChildView(view, index);\n  \n      if (this._isShown && !this.isBuffering) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n  \n      this.triggerMethod('add:child', view);\n    },\n  \n    // render the child view\n    renderChildView: function(view, index) {\n      view.render();\n      this.attachHtml(this, view, index);\n      return view;\n    },\n  \n    // Build a `childView` for a model in the collection.\n    buildChildView: function(child, ChildViewClass, childViewOptions) {\n      var options = _.extend({model: child}, childViewOptions);\n      return new ChildViewClass(options);\n    },\n  \n    // Remove the child view and destroy it.\n    // This function also updates the indices of\n    // later views in the collection in order to keep\n    // the children in sync with the collection.\n    removeChildView: function(view) {\n  \n      if (view) {\n        this.triggerMethod('before:remove:child', view);\n        // call 'destroy' or 'remove', depending on which is found\n        if (view.destroy) { view.destroy(); }\n        else if (view.remove) { view.remove(); }\n  \n        this.stopListening(view);\n        this.children.remove(view);\n        this.triggerMethod('remove:child', view);\n  \n        // decrement the index of views after this one\n        this._updateIndices(view, false);\n      }\n  \n      return view;\n    },\n  \n    // check if the collection is empty\n    isEmpty: function() {\n      return !this.collection || this.collection.length === 0;\n    },\n  \n    // If empty, show the empty view\n    checkEmpty: function() {\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      }\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(collectionView, buffer) {\n      collectionView.$el.append(buffer);\n    },\n  \n    // Append the HTML to the collection's `el`.\n    // Override this method to do something other\n    // than `.append`.\n    attachHtml: function(collectionView, childView, index) {\n      if (collectionView.isBuffering) {\n        // buffering happens on reset events and initial renders\n        // in order to reduce the number of inserts into the\n        // document, which are expensive.\n        collectionView.elBuffer.appendChild(childView.el);\n        collectionView._bufferedChildren.push(childView);\n      }\n      else {\n        // If we've already rendered the main collection, append\n        // the new child into the correct order if we need to. Otherwise\n        // append to the end.\n        if (!collectionView._insertBefore(childView, index)){\n          collectionView._insertAfter(childView);\n        }\n      }\n    },\n  \n    // Internal method. Check whether we need to insert the view into\n    // the correct position.\n    _insertBefore: function(childView, index) {\n      var currentView;\n      var findPosition = this.sort && (index < this.children.length - 1);\n      if (findPosition) {\n        // Find the view after this one\n        currentView = this.children.find(function (view) {\n          return view._index === index + 1;\n        });\n      }\n  \n      if (currentView) {\n        currentView.$el.before(childView.el);\n        return true;\n      }\n  \n      return false;\n    },\n  \n    // Internal method. Append a view to the end of the $el\n    _insertAfter: function(childView) {\n      this.$el.append(childView.el);\n    },\n  \n    // Internal method to set up the `children` object for\n    // storing all of the child views\n    _initChildViewStorage: function() {\n      this.children = new Backbone.ChildViewContainer();\n    },\n  \n    // Handle cleanup and other destroying needs for the collection of views\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n  \n      this.triggerMethod('before:destroy:collection');\n      this.destroyChildren();\n      this.triggerMethod('destroy:collection');\n  \n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Destroy the child views that this collection view\n    // is holding on to, if any\n    destroyChildren: function() {\n      var childViews = this.children.map(_.identity);\n      this.children.each(this.removeChildView, this);\n      this.checkEmpty();\n      return childViews;\n    },\n  \n    // Set up the child view event forwarding. Uses a \"childview:\"\n    // prefix in front of all forwarded events.\n    proxyChildEvents: function(view) {\n      var prefix = this.getOption('childViewEventPrefix');\n  \n      // Forward all child view events through the parent,\n      // prepending \"childview:\" to the event name\n      this.listenTo(view, 'all', function() {\n        var args = slice.call(arguments);\n        var rootEvent = args[0];\n        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));\n  \n        args[0] = prefix + ':' + rootEvent;\n        args.splice(1, 0, view);\n  \n        // call collectionView childEvent if defined\n        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {\n          childEvents[rootEvent].apply(this, args.slice(1));\n        }\n  \n        this.triggerMethod.apply(this, args);\n      }, this);\n    }\n  });\n  \n  /* jshint maxstatements: 17, maxlen: 117 */\n  \n  // Composite View\n  // --------------\n  \n  // Used for rendering a branch-leaf, hierarchical structure.\n  // Extends directly from CollectionView and also renders an\n  // a child view as `modelView`, for the top leaf\n  Marionette.CompositeView = Marionette.CollectionView.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.CollectionView.prototype.constructor which allows overriding\n    // option to pass '{sort: false}' to prevent the CompositeView from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function() {\n      Marionette.CollectionView.apply(this, arguments);\n    },\n  \n    // Configured the initial events that the composite view\n    // binds to. Override this method to prevent the initial\n    // events, or to add your own initial events.\n    _initialEvents: function() {\n  \n      // Bind only after composite view is rendered to avoid adding child views\n      // to nonexistent childViewContainer\n  \n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this._renderChildren);\n  \n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Retrieve the `childView` to be used when rendering each of\n    // the items in the collection. The default is to return\n    // `this.childView` or Marionette.CompositeView if no `childView`\n    // has been defined\n    getChildView: function(child) {\n      var childView = this.getOption('childView') || this.constructor;\n  \n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n  \n      return childView;\n    },\n  \n    // Serialize the collection for the view.\n    // You can override the `serializeData` method in your own view\n    // definition, to provide custom serialization for your view's data.\n    serializeData: function() {\n      var data = {};\n  \n      if (this.model){\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n  \n      return data;\n    },\n  \n    // Renders the model once, and the collection once. Calling\n    // this again will tell the model's view to re-render itself\n    // but the collection will not re-render.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.isRendered = true;\n      this.resetChildViewContainer();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this._renderChildren();\n  \n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    _renderChildren: function() {\n      if (this.isRendered) {\n        Marionette.CollectionView.prototype._renderChildren.call(this);\n      }\n    },\n  \n    // Render the root template that the children\n    // views are appended to\n    _renderTemplate: function() {\n      var data = {};\n      data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      this.triggerMethod('before:render:template');\n  \n      var template = this.getTemplate();\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      // the ui bindings is done here and not at the end of render since they\n      // will not be available until after the model is rendered, but should be\n      // available before the collection is rendered.\n      this.bindUIElements();\n      this.triggerMethod('render:template');\n    },\n  \n    // Attaches the content of the root.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(compositeView, buffer) {\n      var $container = this.getChildViewContainer(compositeView);\n      $container.append(buffer);\n    },\n  \n    // Internal method. Append a view to the end of the $el.\n    // Overidden from CollectionView to ensure view is appended to\n    // childViewContainer\n    _insertAfter: function (childView) {\n      var $container = this.getChildViewContainer(this);\n      $container.append(childView.el);\n    },\n  \n    // Internal method to ensure an `$childViewContainer` exists, for the\n    // `attachHtml` method to use.\n    getChildViewContainer: function(containerView) {\n      if ('$childViewContainer' in containerView) {\n        return containerView.$childViewContainer;\n      }\n  \n      var container;\n      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');\n      if (childViewContainer) {\n  \n        var selector = _.isFunction(childViewContainer) ? childViewContainer.call(containerView) : childViewContainer;\n  \n        if (selector.charAt(0) === '@' && containerView.ui) {\n          container = containerView.ui[selector.substr(4)];\n        } else {\n          container = containerView.$(selector);\n        }\n  \n        if (container.length <= 0) {\n          throw new Marionette.Error({\n            name: 'ChildViewContainerMissingError',\n            message: 'The specified \"childViewContainer\" was not found: ' + containerView.childViewContainer\n          });\n        }\n  \n      } else {\n        container = containerView.$el;\n      }\n  \n      containerView.$childViewContainer = container;\n      return container;\n    },\n  \n    // Internal method to reset the `$childViewContainer` on render\n    resetChildViewContainer: function() {\n      if (this.$childViewContainer) {\n        delete this.$childViewContainer;\n      }\n    }\n  });\n  \n  // LayoutView\n  // ----------\n  \n  // Used for managing application layoutViews, nested layoutViews and\n  // multiple regions within an application or sub-application.\n  //\n  // A specialized view class that renders an area of HTML and then\n  // attaches `Region` instances to the specified `regions`.\n  // Used for composite view management and sub-application areas.\n  Marionette.LayoutView = Marionette.ItemView.extend({\n    regionClass: Marionette.Region,\n  \n    // Ensure the regions are available when the `initialize` method\n    // is called.\n    constructor: function(options) {\n      options = options || {};\n  \n      this._firstRender = true;\n      this._initializeRegions(options);\n  \n      Marionette.ItemView.call(this, options);\n    },\n  \n    // LayoutView's render will use the existing region objects the\n    // first time it is called. Subsequent calls will destroy the\n    // views that the regions are showing and then reset the `el`\n    // for the regions to the newly rendered DOM elements.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      if (this._firstRender) {\n        // if this is the first render, don't do anything to\n        // reset the regions\n        this._firstRender = false;\n      } else {\n        // If this is not the first render call, then we need to\n        // re-initialize the `el` for each region\n        this._reInitializeRegions();\n      }\n  \n      return Marionette.ItemView.prototype.render.apply(this, arguments);\n    },\n  \n    // Handle destroying regions, and then destroy the view itself.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      this.regionManager.destroy();\n      return Marionette.ItemView.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Add a single region, by name, to the layoutView\n    addRegion: function(name, definition) {\n      this.triggerMethod('before:region:add', name);\n      var regions = {};\n      regions[name] = definition;\n      return this._buildRegions(regions)[name];\n    },\n  \n    // Add multiple regions as a {name: definition, name2: def2} object literal\n    addRegions: function(regions) {\n      this.regions = _.extend({}, this.regions, regions);\n      return this._buildRegions(regions);\n    },\n  \n    // Remove a single region from the LayoutView, by name\n    removeRegion: function(name) {\n      this.triggerMethod('before:region:remove', name);\n      delete this.regions[name];\n      return this.regionManager.removeRegion(name);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this.regionManager.get(region);\n    },\n  \n    // Get all regions\n    getRegions: function(){\n      return this.regionManager.getRegions();\n    },\n  \n    // internal method to build regions\n    _buildRegions: function(regions) {\n      var that = this;\n  \n      var defaults = {\n        regionClass: this.getOption('regionClass'),\n        parentEl: function() { return that.$el; }\n      };\n  \n      return this.regionManager.addRegions(regions, defaults);\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on this layoutView.\n    _initializeRegions: function(options) {\n      var regions;\n      this._initRegionManager();\n  \n      if (_.isFunction(this.regions)) {\n        regions = this.regions(options);\n      } else {\n        regions = this.regions || {};\n      }\n  \n      // Enable users to define `regions` as instance options.\n      var regionOptions = this.getOption.call(options, 'regions');\n  \n      // enable region options to be a function\n      if (_.isFunction(regionOptions)) {\n        regionOptions = regionOptions.call(this, options);\n      }\n  \n      _.extend(regions, regionOptions);\n  \n      // Normalize region selectors hash to allow\n      // a user to use the @ui. syntax.\n      regions = this.normalizeUIValues(regions);\n  \n      this.addRegions(regions);\n    },\n  \n    // Internal method to re-initialize all of the regions by updating the `el` that\n    // they point to\n    _reInitializeRegions: function() {\n      this.regionManager.emptyRegions();\n      this.regionManager.each(function(region) {\n        region.reset();\n      });\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the region manager\n    // and all regions in it\n    _initRegionManager: function() {\n      this.regionManager = this.getRegionManager();\n  \n      this.listenTo(this.regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n  \n      this.listenTo(this.regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    }\n  });\n  \n\n  // Behavior\n  // -----------\n  \n  // A Behavior is an isolated set of DOM /\n  // user interactions that can be mixed into any View.\n  // Behaviors allow you to blackbox View specific interactions\n  // into portable logical chunks, keeping your views simple and your code DRY.\n  \n  Marionette.Behavior = (function(_, Backbone) {\n    function Behavior(options, view) {\n      // Setup reference to the view.\n      // this comes in handle when a behavior\n      // wants to directly talk up the chain\n      // to the view.\n      this.view = view;\n      this.defaults = _.result(this, 'defaults') || {};\n      this.options  = _.extend({}, this.defaults, options);\n  \n      // proxy behavior $ method to the view\n      // this is useful for doing jquery DOM lookups\n      // scoped to behaviors view.\n      this.$ = function() {\n        return this.view.$.apply(this.view, arguments);\n      };\n  \n      // Call the initialize method passing\n      // the arguments from the instance constructor\n      this.initialize.apply(this, arguments);\n    }\n  \n    _.extend(Behavior.prototype, Backbone.Events, {\n      initialize: function() {},\n  \n      // stopListening to behavior `onListen` events.\n      destroy: function() {\n        this.stopListening();\n      },\n  \n      proxyViewProperties: function (view) {\n        this.$el = view.$el;\n        this.el = view.el;\n      },\n  \n      // import the `triggerMethod` to trigger events with corresponding\n      // methods if the method exists\n      triggerMethod: Marionette.triggerMethod,\n  \n      // Proxy `getOption` to enable getting options from this or this.options by name.\n      getOption: Marionette.proxyGetOption,\n  \n      // Proxy `unbindEntityEvents` to enable binding view's events from another entity.\n      bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n      // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n      unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n    });\n  \n    // Borrow Backbones extend implementation\n    // this allows us to setup a proper\n    // inheritance pattern that follows suit\n    // with the rest of Marionette views.\n    Behavior.extend = Marionette.extend;\n  \n    return Behavior;\n  })(_, Backbone);\n  \n  /* jshint maxlen: 143 */\n  // Marionette.Behaviors\n  // --------\n  \n  // Behaviors is a utility class that takes care of\n  // gluing your behavior instances to their given View.\n  // The most important part of this class is that you\n  // **MUST** override the class level behaviorsLookup\n  // method for things to work properly.\n  \n  Marionette.Behaviors = (function(Marionette, _) {\n  \n    function Behaviors(view, behaviors) {\n  \n      if (!_.isObject(view.behaviors)) {\n        return {};\n      }\n  \n      // Behaviors defined on a view can be a flat object literal\n      // or it can be a function that returns an object.\n      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));\n  \n      // Wraps several of the view's methods\n      // calling the methods first on each behavior\n      // and then eventually calling the method on the view.\n      Behaviors.wrap(view, behaviors, _.keys(methods));\n      return behaviors;\n    }\n  \n    var methods = {\n      behaviorTriggers: function(behaviorTriggers, behaviors) {\n        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);\n        return triggerBuilder.buildBehaviorTriggers();\n      },\n  \n      behaviorEvents: function(behaviorEvents, behaviors) {\n        var _behaviorsEvents = {};\n        var viewUI = _.result(this, 'ui');\n  \n        _.each(behaviors, function(b, i) {\n          var _events = {};\n          var behaviorEvents = _.clone(_.result(b, 'events')) || {};\n          var behaviorUI = _.result(b, 'ui');\n  \n          // Construct an internal UI hash first using\n          // the views UI hash and then the behaviors UI hash.\n          // This allows the user to use UI hash elements\n          // defined in the parent view as well as those\n          // defined in the given behavior.\n          var ui = _.extend({}, viewUI, behaviorUI);\n  \n          // Normalize behavior events hash to allow\n          // a user to use the @ui. syntax.\n          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, ui);\n  \n          _.each(_.keys(behaviorEvents), function(key) {\n            // Append white-space at the end of each key to prevent behavior key collisions.\n            // This is relying on the fact that backbone events considers \"click .foo\" the same as\n            // \"click .foo \".\n  \n            // +2 is used because new Array(1) or 0 is \"\" and not \" \"\n            var whitespace = (new Array(i + 2)).join(' ');\n            var eventKey   = key + whitespace;\n            var handler    = _.isFunction(behaviorEvents[key]) ? behaviorEvents[key] : b[behaviorEvents[key]];\n  \n            _events[eventKey] = _.bind(handler, b);\n          });\n  \n          _behaviorsEvents = _.extend(_behaviorsEvents, _events);\n        });\n  \n        return _behaviorsEvents;\n      }\n    };\n  \n    _.extend(Behaviors, {\n  \n      // Placeholder method to be extended by the user.\n      // The method should define the object that stores the behaviors.\n      // i.e.\n      //\n      // ```js\n      // Marionette.Behaviors.behaviorsLookup: function() {\n      //   return App.Behaviors\n      // }\n      // ```\n      behaviorsLookup: function() {\n        throw new Marionette.Error({\n          message: 'You must define where your behaviors are stored.',\n          url: 'marionette.behaviors.html#behaviorslookup'\n        });\n      },\n  \n      // Takes care of getting the behavior class\n      // given options and a key.\n      // If a user passes in options.behaviorClass\n      // default to using that. Otherwise delegate\n      // the lookup to the users `behaviorsLookup` implementation.\n      getBehaviorClass: function(options, key) {\n        if (options.behaviorClass) {\n          return options.behaviorClass;\n        }\n  \n        // Get behavior class can be either a flat object or a method\n        return _.isFunction(Behaviors.behaviorsLookup) ? Behaviors.behaviorsLookup.apply(this, arguments)[key] : Behaviors.behaviorsLookup[key];\n      },\n  \n      // Iterate over the behaviors object, for each behavior\n      // instantiate it and get its grouped behaviors.\n      parseBehaviors: function(view, behaviors) {\n        return _.chain(behaviors).map(function(options, key) {\n          var BehaviorClass = Behaviors.getBehaviorClass(options, key);\n  \n          var behavior = new BehaviorClass(options, view);\n          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));\n  \n          return [behavior].concat(nestedBehaviors);\n        }).flatten().value();\n      },\n  \n      // Wrap view internal methods so that they delegate to behaviors. For example,\n      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.\n      // i.e.\n      //\n      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`\n      wrap: function(view, behaviors, methodNames) {\n        _.each(methodNames, function(methodName) {\n          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);\n        });\n      }\n    });\n  \n    // Class to build handlers for `triggers` on behaviors\n    // for views\n    function BehaviorTriggersBuilder(view, behaviors) {\n      this._view      = view;\n      this._viewUI    = _.result(view, 'ui');\n      this._behaviors = behaviors;\n      this._triggers  = {};\n    }\n  \n    _.extend(BehaviorTriggersBuilder.prototype, {\n      // Main method to build the triggers hash with event keys and handlers\n      buildBehaviorTriggers: function() {\n        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);\n        return this._triggers;\n      },\n  \n      // Internal method to build all trigger handlers for a given behavior\n      _buildTriggerHandlersForBehavior: function(behavior, i) {\n        var ui = _.extend({}, this._viewUI, _.result(behavior, 'ui'));\n        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};\n  \n        triggersHash = Marionette.normalizeUIKeys(triggersHash, ui);\n  \n        _.each(triggersHash, _.partial(this._setHandlerForBehavior, behavior, i), this);\n      },\n  \n      // Internal method to create and assign the trigger handler for a given\n      // behavior\n      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {\n        // Unique identifier for the `this._triggers` hash\n        var triggerKey = trigger.replace(/^\\S+/, function(triggerName) {\n          return triggerName + '.' + 'behaviortriggers' + i;\n        });\n  \n        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);\n      }\n    });\n  \n    return Behaviors;\n  \n  })(Marionette, _);\n  \n\n  // AppRouter\n  // ---------\n  \n  // Reduce the boilerplate code of handling route events\n  // and then calling a single method on another object.\n  // Have your routers configured to call the method on\n  // your object, directly.\n  //\n  // Configure an AppRouter with `appRoutes`.\n  //\n  // App routers can only take one `controller` object.\n  // It is recommended that you divide your controller\n  // objects in to smaller pieces of related functionality\n  // and have multiple routers / controllers, instead of\n  // just one giant router and controller.\n  //\n  // You can also add standard routes to an AppRouter.\n  \n  Marionette.AppRouter = Backbone.Router.extend({\n  \n    constructor: function(options) {\n      Backbone.Router.apply(this, arguments);\n  \n      this.options = options || {};\n  \n      var appRoutes = this.getOption('appRoutes');\n      var controller = this._getController();\n      this.processAppRoutes(controller, appRoutes);\n      this.on('route', this._processOnRoute, this);\n    },\n  \n    // Similar to route method on a Backbone Router but\n    // method is called on the controller\n    appRoute: function(route, methodName) {\n      var controller = this._getController();\n      this._addAppRoute(controller, route, methodName);\n    },\n  \n    // process the route event and trigger the onRoute\n    // method call, if it exists\n    _processOnRoute: function(routeName, routeArgs) {\n      // find the path that matched\n      var routePath = _.invert(this.getOption('appRoutes'))[routeName];\n  \n      // make sure an onRoute is there, and call it\n      if (_.isFunction(this.onRoute)) {\n        this.onRoute(routeName, routePath, routeArgs);\n      }\n    },\n  \n    // Internal method to process the `appRoutes` for the\n    // router, and turn them in to routes that trigger the\n    // specified method on the specified `controller`.\n    processAppRoutes: function(controller, appRoutes) {\n      if (!appRoutes) { return; }\n  \n      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n  \n      _.each(routeNames, function(route) {\n        this._addAppRoute(controller, route, appRoutes[route]);\n      }, this);\n    },\n  \n    _getController: function() {\n      return this.getOption('controller');\n    },\n  \n    _addAppRoute: function(controller, route, methodName) {\n      var method = controller[methodName];\n  \n      if (!method) {\n        throw new Marionette.Error('Method \"' + methodName + '\" was not found on the controller');\n      }\n  \n      this.route(route, methodName, _.bind(method, controller));\n    },\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  });\n  \n  // Application\n  // -----------\n  \n  // Contain and manage the composite application as a whole.\n  // Stores and starts up `Region` objects, includes an\n  // event aggregator as `app.vent`\n  Marionette.Application = function(options) {\n    this.options = options;\n    this._initializeRegions(options);\n    this._initCallbacks = new Marionette.Callbacks();\n    this.submodules = {};\n    _.extend(this, options);\n    this._initChannel();\n    this.initialize.apply(this, arguments);\n  };\n  \n  _.extend(Marionette.Application.prototype, Backbone.Events, {\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function() {},\n  \n    // Command execution, facilitated by Backbone.Wreqr.Commands\n    execute: function() {\n      this.commands.execute.apply(this.commands, arguments);\n    },\n  \n    // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n    request: function() {\n      return this.reqres.request.apply(this.reqres, arguments);\n    },\n  \n    // Add an initializer that is either run at when the `start`\n    // method is called, or run immediately if added after `start`\n    // has already been called.\n    addInitializer: function(initializer) {\n      this._initCallbacks.add(initializer);\n    },\n  \n    // kick off all of the application's processes.\n    // initializes all of the regions that have been added\n    // to the app, and runs all of the initializer functions\n    start: function(options) {\n      this.triggerMethod('before:start', options);\n      this._initCallbacks.run(options, this);\n      this.triggerMethod('start', options);\n    },\n  \n    // Add regions to your app.\n    // Accepts a hash of named strings or Region objects\n    // addRegions({something: \"#someRegion\"})\n    // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n    addRegions: function(regions) {\n      return this._regionManager.addRegions(regions);\n    },\n  \n    // Empty all regions in the app, without removing them\n    emptyRegions: function() {\n      return this._regionManager.emptyRegions();\n    },\n  \n    // Removes a region from your app, by name\n    // Accepts the regions name\n    // removeRegion('myRegion')\n    removeRegion: function(region) {\n      return this._regionManager.removeRegion(region);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this._regionManager.get(region);\n    },\n  \n    // Get all the regions from the region manager\n    getRegions: function(){\n      return this._regionManager.getRegions();\n    },\n  \n    // Create a module, attached to the application\n    module: function(moduleNames, moduleDefinition) {\n  \n      // Overwrite the module class if the user specifies one\n      var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n  \n      // slice the args, and add this application object as the\n      // first argument of the array\n      var args = slice.call(arguments);\n      args.unshift(this);\n  \n      // see the Marionette.Module object for more information\n      return ModuleClass.create.apply(ModuleClass, args);\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business-specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on the application instance\n    _initializeRegions: function(options) {\n      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};\n  \n      this._initRegionManager();\n  \n      // Enable users to define `regions` in instance options.\n      var optionRegions = Marionette.getOption(options, 'regions');\n  \n      // Enable region options to be a function\n      if (_.isFunction(optionRegions)) {\n        optionRegions = optionRegions.call(this, options);\n      }\n  \n      // Overwrite current regions with those passed in options\n      _.extend(regions, optionRegions);\n  \n      this.addRegions(regions);\n  \n      return this;\n    },\n  \n    // Internal method to set up the region manager\n    _initRegionManager: function() {\n      this._regionManager = this.getRegionManager();\n  \n      this.listenTo(this._regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n  \n      this.listenTo(this._regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n  \n      this.listenTo(this._regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n  \n      this.listenTo(this._regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    },\n  \n    // Internal method to setup the Wreqr.radio channel\n    _initChannel: function() {\n      this.channelName = _.result(this, 'channelName') || 'global';\n      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);\n      this.vent = _.result(this, 'vent') || this.channel.vent;\n      this.commands = _.result(this, 'commands') || this.channel.commands;\n      this.reqres = _.result(this, 'reqres') || this.channel.reqres;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  });\n  \n  // Copy the `extend` function used by Backbone's classes\n  Marionette.Application.extend = Marionette.extend;\n  \n  /* jshint maxparams: 9 */\n  \n  // Module\n  // ------\n  \n  // A simple module system, used to create privacy and encapsulation in\n  // Marionette applications\n  Marionette.Module = function(moduleName, app, options) {\n    this.moduleName = moduleName;\n    this.options = _.extend({}, this.options, options);\n    // Allow for a user to overide the initialize\n    // for a given module instance.\n    this.initialize = options.initialize || this.initialize;\n  \n    // Set up an internal store for sub-modules.\n    this.submodules = {};\n  \n    this._setupInitializersAndFinalizers();\n  \n    // Set an internal reference to the app\n    // within a module.\n    this.app = app;\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(moduleName, app, this.options);\n    }\n  };\n  \n  Marionette.Module.extend = Marionette.extend;\n  \n  // Extend the Module prototype with events / listenTo, so that the module\n  // can be used as an event aggregator or pub/sub.\n  _.extend(Marionette.Module.prototype, Backbone.Events, {\n  \n    // By default modules start with their parents.\n    startWithParent: true,\n  \n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic when extending Marionette.Module.\n    initialize: function() {},\n  \n    // Initializer for a specific module. Initializers are run when the\n    // module's `start` method is called.\n    addInitializer: function(callback) {\n      this._initializerCallbacks.add(callback);\n    },\n  \n    // Finalizers are run when a module is stopped. They are used to teardown\n    // and finalize any variables, references, events and other code that the\n    // module had set up.\n    addFinalizer: function(callback) {\n      this._finalizerCallbacks.add(callback);\n    },\n  \n    // Start the module, and run all of its initializers\n    start: function(options) {\n      // Prevent re-starting a module that is already started\n      if (this._isInitialized) { return; }\n  \n      // start the sub-modules (depth-first hierarchy)\n      _.each(this.submodules, function(mod) {\n        // check to see if we should start the sub-module with this parent\n        if (mod.startWithParent) {\n          mod.start(options);\n        }\n      });\n  \n      // run the callbacks to \"start\" the current module\n      this.triggerMethod('before:start', options);\n  \n      this._initializerCallbacks.run(options, this);\n      this._isInitialized = true;\n  \n      this.triggerMethod('start', options);\n    },\n  \n    // Stop this module by running its finalizers and then stop all of\n    // the sub-modules for this module\n    stop: function() {\n      // if we are not initialized, don't bother finalizing\n      if (!this._isInitialized) { return; }\n      this._isInitialized = false;\n  \n      this.triggerMethod('before:stop');\n  \n      // stop the sub-modules; depth-first, to make sure the\n      // sub-modules are stopped / finalized before parents\n      _.each(this.submodules, function(mod) { mod.stop(); });\n  \n      // run the finalizers\n      this._finalizerCallbacks.run(undefined, this);\n  \n      // reset the initializers and finalizers\n      this._initializerCallbacks.reset();\n      this._finalizerCallbacks.reset();\n  \n      this.triggerMethod('stop');\n    },\n  \n    // Configure the module with a definition function and any custom args\n    // that are to be passed in to the definition function\n    addDefinition: function(moduleDefinition, customArgs) {\n      this._runModuleDefinition(moduleDefinition, customArgs);\n    },\n  \n    // Internal method: run the module definition function with the correct\n    // arguments\n    _runModuleDefinition: function(definition, customArgs) {\n      // If there is no definition short circut the method.\n      if (!definition) { return; }\n  \n      // build the correct list of arguments for the module definition\n      var args = _.flatten([\n        this,\n        this.app,\n        Backbone,\n        Marionette,\n        Backbone.$, _,\n        customArgs\n      ]);\n  \n      definition.apply(this, args);\n    },\n  \n    // Internal method: set up new copies of initializers and finalizers.\n    // Calling this method will wipe out all existing initializers and\n    // finalizers.\n    _setupInitializersAndFinalizers: function() {\n      this._initializerCallbacks = new Marionette.Callbacks();\n      this._finalizerCallbacks = new Marionette.Callbacks();\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n  \n  // Class methods to create modules\n  _.extend(Marionette.Module, {\n  \n    // Create a module, hanging off the app parameter as the parent object.\n    create: function(app, moduleNames, moduleDefinition) {\n      var module = app;\n  \n      // get the custom args passed in after the module definition and\n      // get rid of the module name and definition function\n      var customArgs = slice.call(arguments);\n      customArgs.splice(0, 3);\n  \n      // Split the module names and get the number of submodules.\n      // i.e. an example module name of `Doge.Wow.Amaze` would\n      // then have the potential for 3 module definitions.\n      moduleNames = moduleNames.split('.');\n      var length = moduleNames.length;\n  \n      // store the module definition for the last module in the chain\n      var moduleDefinitions = [];\n      moduleDefinitions[length - 1] = moduleDefinition;\n  \n      // Loop through all the parts of the module definition\n      _.each(moduleNames, function(moduleName, i) {\n        var parentModule = module;\n        module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n      }, this);\n  \n      // Return the last module in the definition chain\n      return module;\n    },\n  \n    _getModule: function(parentModule, moduleName, app, def, args) {\n      var options = _.extend({}, def);\n      var ModuleClass = this.getClass(def);\n  \n      // Get an existing module of this name if we have one\n      var module = parentModule[moduleName];\n  \n      if (!module) {\n        // Create a new module if we don't have one\n        module = new ModuleClass(moduleName, app, options);\n        parentModule[moduleName] = module;\n        // store the module on the parent\n        parentModule.submodules[moduleName] = module;\n      }\n  \n      return module;\n    },\n  \n    // ## Module Classes\n    //\n    // Module classes can be used as an alternative to the define pattern.\n    // The extend function of a Module is identical to the extend functions\n    // on other Backbone and Marionette classes.\n    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.\n    getClass: function(moduleDefinition) {\n      var ModuleClass = Marionette.Module;\n  \n      if (!moduleDefinition) {\n        return ModuleClass;\n      }\n  \n      // If all of the module's functionality is defined inside its class,\n      // then the class can be passed in directly. `MyApp.module(\"Foo\", FooModule)`.\n      if (moduleDefinition.prototype instanceof ModuleClass) {\n        return moduleDefinition;\n      }\n  \n      return moduleDefinition.moduleClass || ModuleClass;\n    },\n  \n    // Add the module definition and add a startWithParent initializer function.\n    // This is complicated because module definitions are heavily overloaded\n    // and support an anonymous function, module class, or options object\n    _addModuleDefinition: function(parentModule, module, def, args) {\n      var fn = this._getDefine(def);\n      var startWithParent = this._getStartWithParent(def, module);\n  \n      if (fn) {\n        module.addDefinition(fn, args);\n      }\n  \n      this._addStartWithParent(parentModule, module, startWithParent);\n    },\n  \n    _getStartWithParent: function(def, module) {\n      var swp;\n  \n      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {\n        swp = module.constructor.prototype.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      if (_.isObject(def)) {\n        swp = def.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      return true;\n    },\n  \n    _getDefine: function(def) {\n      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {\n        return def;\n      }\n  \n      if (_.isObject(def)) {\n        return def.define;\n      }\n  \n      return null;\n    },\n  \n    _addStartWithParent: function(parentModule, module, startWithParent) {\n      module.startWithParent = module.startWithParent && startWithParent;\n  \n      if (!module.startWithParent || !!module.startWithParentIsConfigured) {\n        return;\n      }\n  \n      module.startWithParentIsConfigured = true;\n  \n      parentModule.addInitializer(function(options) {\n        if (module.startWithParent) {\n          module.start(options);\n        }\n      });\n    }\n  });\n  \n\n  return Marionette;\n}));\n","Backbone.Marionette.CollectionView.prototype.addChildView = function(item, collection, options) {\n    var filter = this.options.filter || this.filter;\n    if (filter && !filter.call(this, item)) {\n        return;\n    }\n\n    this.closeEmptyView();\n    var itemView = this.getItemView(item);\n    var index = this.collection.indexOf(item);\n    this.addItemView(item, itemView, index);\n};\n\nBackbone.Marionette.CollectionView.prototype.showCollection = function() {\n    var filter = this.options.filter || this.filter;\n\n    this.collection.each(function(item, index) {\n        if (filter && !filter.call(this, item)) {\n            return;\n        }\n\n        var itemView = this.getItemView(item);\n        this.addItemView(item, itemView, index);\n    }, this);\n};","/**\n * jQuery serializeObject\n * @copyright 2014, macek <paulmacek@gmail.com>\n * @link https://github.com/macek/jquery-serialize-object\n * @license BSD\n * @version 2.4.3\n */\n(function(root, factory) {\n\n  // AMD\n  if (typeof define === \"function\" && define.amd) {\n    define([\"exports\", \"jquery\"], function(exports, $) {\n      return factory(exports, $);\n    });\n  }\n\n  // CommonJS\n  else if (typeof exports !== \"undefined\") {\n    var $ = require(\"jquery\");\n    factory(exports, $);\n  }\n\n  // Browser\n  else {\n    factory(root, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(this, function(exports, $) {\n\n  var patterns = {\n    validate: /^[a-z_][a-z0-9_]*(?:\\[(?:\\d*|[a-z0-9_]+)\\])*$/i,\n    key:      /[a-z0-9_]+|(?=\\[\\])/gi,\n    push:     /^$/,\n    fixed:    /^\\d+$/,\n    named:    /^[a-z0-9_]+$/i\n  };\n\n  function FormSerializer(helper, $form) {\n\n    // private variables\n    var data     = {},\n        pushes   = {};\n\n    // private API\n    function build(base, key, value) {\n      base[key] = value;\n      return base;\n    }\n\n    function makeObject(root, value) {\n\n      var keys = root.match(patterns.key), k;\n\n      // nest, nest, ..., nest\n      while ((k = keys.pop()) !== undefined) {\n        // foo[]\n        if (patterns.push.test(k)) {\n          var idx = incrementPush(root.replace(/\\[\\]$/, ''));\n          value = build([], idx, value);\n        }\n\n        // foo[n]\n        else if (patterns.fixed.test(k)) {\n          value = build([], k, value);\n        }\n\n        // foo; foo[bar]\n        else if (patterns.named.test(k)) {\n          value = build({}, k, value);\n        }\n      }\n\n      return value;\n    }\n\n    function incrementPush(key) {\n      if (pushes[key] === undefined) {\n        pushes[key] = 0;\n      }\n      return pushes[key]++;\n    }\n\n    function encode(pair) {\n      switch ($('[name=\"' + pair.name + '\"]', $form).attr(\"type\")) {\n        case \"checkbox\":\n          return pair.value === \"on\" ? true : pair.value;\n        default:\n          return pair.value;\n      }\n    }\n\n    function addPair(pair) {\n      if (!patterns.validate.test(pair.name)) return this;\n      var obj = makeObject(pair.name, encode(pair));\n      data = helper.extend(true, data, obj);\n      return this;\n    }\n\n    function addPairs(pairs) {\n      if (!helper.isArray(pairs)) {\n        throw new Error(\"formSerializer.addPairs expects an Array\");\n      }\n      for (var i=0, len=pairs.length; i<len; i++) {\n        this.addPair(pairs[i]);\n      }\n      return this;\n    }\n\n    function serialize() {\n      return data;\n    }\n\n    function serializeJSON() {\n      return JSON.stringify(serialize());\n    }\n\n    // public API\n    this.addPair = addPair;\n    this.addPairs = addPairs;\n    this.serialize = serialize;\n    this.serializeJSON = serializeJSON;\n  }\n\n  FormSerializer.patterns = patterns;\n\n  FormSerializer.serializeObject = function serializeObject() {\n    if (this.length > 1) {\n      return new Error(\"jquery-serialize-object can only serialize one form at a time\");\n    }\n    return new FormSerializer($, this).\n      addPairs(this.serializeArray()).\n      serialize();\n  };\n\n  FormSerializer.serializeJSON = function serializeJSON() {\n    if (this.length > 1) {\n      return new Error(\"jquery-serialize-object can only serialize one form at a time\");\n    }\n    return new FormSerializer($, this).\n      addPairs(this.serializeArray()).\n      serializeJSON();\n  };\n\n  if (typeof $.fn !== \"undefined\") {\n    $.fn.serializeObject = FormSerializer.serializeObject;\n    $.fn.serializeJSON   = FormSerializer.serializeJSON;\n  }\n\n  exports.FormSerializer = FormSerializer;\n\n  return FormSerializer;\n}));\n","Extension = window.Extension || {};\n\nExtension.Application = Marionette.Application.extend({\n    initialize: function() {\n        var App = this;\n\n        Marionette.Behaviors.behaviorsLookup = function() {\n            return App.Behaviors;\n        };\n\n        App.parameters = new Backbone.Model();\n\n        App.on(\"stop\", function() {\n            App.parameters.clear();\n        });\n    },\n\n    setParameter: function(key, value) {\n        this.parameters.set(key, value);\n    },\n\n    getParameter: function(key) {\n        return this.parameters.get(key);\n    }\n});","Extension = window.Extension || {};\n\nExtension.LayoutView = Marionette.LayoutView.extend({\n    /**\n     * Removed default action on hash links\n     * in order not to trigger router methods\n     */\n    preventHashChange: function(event) {\n        var $target = $(event.currentTarget);\n\n        if (_.string.startsWith($target.attr('href'), '#')) {\n            event.preventDefault();\n        }\n    },\n\n    /**\n     * Open a view in a modal\n     *\n     * Attach a view to modal region\n     * and trigger modal initialization\n     */\n    openModal: function(modalView, options) {\n        var self = this;\n\n        this.modal.show(modalView);\n\n        $.magnificPopup.open(_.defaults({}, options, {\n            items: {\n                src: this.modal.$el,\n                type: 'inline'\n            },\n            /*modal: true,*/\n            midClick: true,\n            callbacks: {\n                open: function() {\n                    self.modal.$el.on(\"click\", \".mfp-close, .mfp-inline-close\", function() {\n                        App.layout.closeModal();\n                    });\n\n                    self.modal.$el.on(\"click\", \"a[href]\", function(event) {\n                        self.preventHashChange(event);\n                    });\n                },\n                close: function() {\n                    modalView.destroy();\n                }\n            }\n        }));\n    },\n\n    /**\n     * Close current modal\n     *\n     * A modal view class can be passed to prevent closing the wrong modal\n     */\n    closeModal: function(modalViewClass) {\n        if (!modalViewClass || this.modal.currentView instanceof modalViewClass) {\n            $.magnificPopup.close();\n        }\n    }\n});","Extension = window.Extension || {};\n\n/**\n * Relational model extension\n */\nExtension.RelationalModel = Backbone.Model.extend({\n    set: function() {\n        Backbone.Model.prototype.set.apply(this, arguments);\n\n        if (_.isUndefined(this._initialAttributes)) {\n            this._initialAttributes = _(this.attributes).clone();\n        }\n\n        return this;\n    },\n\n    /**\n     * To be used in parse process\n     * > add model response to collection\n     * > and return related model\n     */\n    addReference: function(collection, givenModel, additionalValues, callback) {\n        var model = _(givenModel).extend(additionalValues);\n\n        var addedModels = collection.add([model], {merge: true, parse: true});\n\n        if (_.isFunction(callback)) {\n            var self = this;\n\n            _(addedModels).each(function(addedModel) {\n                callback.call(self, addedModel);\n            });\n        }\n\n        return addedModels[0];\n    },\n\n    /**\n     * To be used in parse process\n     * > add model responses to collection\n     * > and return an array of related models\n     */\n    addReferences: function(collection, givenModels, additionalValues, callback) {\n        var models = _(givenModels).map(function(model) {\n            return _(model).extend(additionalValues);\n        });\n\n        var addedModels = collection.add(models, {merge: true, parse: true});\n\n        if (_.isFunction(callback)) {\n            var self = this;\n\n            _(addedModels).each(function(addedModel) {\n                callback.call(self, addedModel);\n            });\n        }\n\n        return new Backbone.Collection(addedModels);\n    },\n\n    /**\n     * Serialize model\n     * > used in saving process\n     */\n    toJSON: function(options) {\n        // serialize helper, which flatten related models to ids\n        var serialize = function(value) {\n            if (value instanceof Backbone.Collection) {\n                return value.chain().map(serialize).reject(_.isUndefined).value();\n            } else if (_.isObject(value) && value.cid) {\n                return value.id;\n            } else {\n                return value;\n            }\n        };\n\n        var attributes = {};\n\n        _(this.attributes).each(function(value, key) {\n            attributes[key] = serialize(value);\n        });\n\n        return attributes;\n    },\n\n    /**\n     * Nested save process\n     * > save related models before current model\n     *\n     * @returns {Deferred}\n     */\n    save: function(key, val, options) {\n        var self = this;\n\n        options = options || {\n            models: []\n        };\n\n        // remember object tree to avoid infinite recursion\n        if (_(options['models']).contains(this)) {\n            return $.Deferred().resolve();\n        } else {\n            options['models'].push(this);\n        }\n\n        // get related models\n        var relatedModels = [];\n        _(this.attributes).each(function(attribute) {\n            if (attribute instanceof Backbone.Model) {\n                relatedModels.push(attribute);\n            } else if (attribute instanceof Backbone.Collection) {\n                relatedModels = relatedModels.concat(attribute.models);\n            }\n        });\n\n        // check models to sync\n        var modelsToSync = _(relatedModels).filter(function(model) {\n            return model.hasUrl() && model.isSyncable();\n        });\n\n        // if there is no model to sync, use regular save method\n        if (modelsToSync.length < 1) {\n            return this._save(key, val, options);\n        }\n\n        // reject save if a related model is invalid\n        if (!_(modelsToSync).every(function(model) {\n            return model.isValid();\n        })) {\n            return false;\n        }\n\n        // prepare deferred save\n        var deferredSave = $.Deferred();\n\n        // sync related models first\n        _(modelsToSync).each(function(model, i) {\n            model.save(null, null, options).done(function() {\n                modelsToSync.pop();\n\n                // if we have synced all related model, save parent\n                if (modelsToSync.length < 1) {\n                    self._save(key, val, options).done(function() {\n                        // then resolve the promise\n                        deferredSave.resolve();\n                    });\n                }\n            });\n        });\n\n        return deferredSave;\n    },\n\n    _save: function() {\n        var self = this;\n        var xhr = Backbone.Model.prototype.save.apply(this, arguments).done(function() {\n            self._initialAttributes = _(self.attributes).clone();\n        });\n        return xhr;\n    },\n    \n    /**\n     * Test if model has changed this initialization\n     * \n     * @returns {Boolean}\n     */\n    isVanilla: function() {\n        return _(this._initialAttributes).isEqual(this.attributes);\n    },\n\n    /**\n     * Test if model has data to be synced\n     *\n     * @returns {Boolean}\n     */\n    isSyncable: function() {\n        return this.isNew() || !this.isVanilla();\n    },\n\n    /**\n     * Test if model has a valid url\n     *\n     * @returns {Boolean}\n     */\n    hasUrl: function() {\n        var baseUrl =\n            _.result(this, 'urlRoot') ||\n            _.result(this.collection, 'url');\n\n        return !!baseUrl;\n    }\n});","Extension = window.Extension || {};\n\n/**\n * Sub-collection extension\n * A sub collection sync with a parent collection\n *\n * Eg:\n * - subcollection:    activeUsers\n * - parentcollection: allUsers\n *\n * Add and remove in subcollection are synced with the parent collection, but add and remove in parent collection\n * are not synced the subcollections because we don't know how they are related.\n *\n * Model changes are sync with all collections because model are object references.\n */\nExtension.SubCollection = Backbone.Collection.extend({\n    constructor: function(models, options) {\n        options || (options = {});\n\n        // parent option should be set on initialization\n        if (options.parent) {\n            this.parent = options.parent;\n            this.model = this.parent.model;\n            this.comparator = this.parent.comparator;\n\n            this.on(\"add\", function(model, collection, options) {\n                this.parent.add(model, options);\n            });\n            this.on(\"remove\", function(model, collection, options) {\n                this.parent.remove(model, options);\n            });\n            this.on(\"reset\", function(collection, options) {\n                this.parent.reset(options);\n            });\n            this.on(\"change\", function(model, changes) {\n                this.parent.get(model).set(model.toJSON());\n            });\n        }\n\n        Backbone.Collection.apply(this, arguments);\n    }\n});","App = window.App || new Extension.Application();\n\nApp.module('Models', function(module) {\n    module.Message = Extension.RelationalModel.extend({\n        // nothing yet\n    });\n});","App = window.App || new Extension.Application();\n\nApp.module('Collections', function(module) {\n    /**\n     * Global limit collection\n     */\n    module.Messages = Backbone.Collection.extend({\n        model: App.Models.Message,\n        url: function() {\n            return App.getParameter('api_base_url')+'/messages.json';\n        }\n    });\n\n    App.on(\"before:start\", function() {\n        App.messages = new App.Collections.Messages();\n    });\n\n    App.on(\"start\", function() {\n        App.messages.fetch();\n    });\n\n    App.on(\"stop\", function() {\n        App.messages.reset();\n    });\n});","App = window.App || new Extension.Application();\n\nApp.module('Views', function(module) {\n\n    module.ChatRoomMessage = Marionette.ItemView.extend({\n        template: \"#chat-room-message-template\",\n        serializeData: function() {\n            return {\n                message: this.model\n            };\n        },\n\n        modelEvents: {\n            'change:text': 'render'\n        },\n\n        tagName: 'li'\n    });\n\n    module.ChatRoom = Marionette.CompositeView.extend({\n        template: \"#chat-room-template\",\n        serializeData: function() {\n            return {\n                messages: this.collection\n            };\n        },\n\n        childView: module.ChatRoomMessage,\n        childViewContainer: 'ul'\n    });\n});","App = window.App || new Extension.Application();\n\nApp.module('Views', function(module) {\n    module.Layout = Extension.LayoutView.extend({\n        template: \"#layout-template\",\n\n        events: {\n            \"click a[href]\": \"preventHashChange\"\n        },\n\n        regions: {\n            chatRoom: \"#chat-room-region\",\n            messageForm: \"#message-form-region\"\n        },\n\n        onRender: function() {\n            this.chatRoom.show(new App.Views.ChatRoom({\n                collection: App.messages\n            }));\n\n            this.messageForm.show(new App.Views.MessageForm({\n                model: new App.Models.Message()\n            }));\n        }\n    });\n});","App = window.App || new Extension.Application();\n\nApp.module('Views', function(module) {\n    module.MessageForm = Marionette.ItemView.extend({\n        template: \"#message-form-template\",\n        serializeData: function() {\n            return {\n                message: this.model\n            };\n        },\n\n        events: {\n            \"submit form\": \"onFormSubmit\"\n        },\n\n        onFormSubmit: function(event) {\n            event.preventDefault();\n\n            var values = this.$('form').serializeObject();\n            var message = new App.Models.Message(values.message);\n            App.messages.add(message);\n            message.save();\n\n            this.render();\n        }\n    });\n});","App = window.App || new Extension.Application();\n\n$(function() {\n    // after booting the application\n    App.on(\"before:start\", function() {\n        // initialize data\n        App.setParameter('api_base_url', 'http://api-marionette.local/api');\n    });\n\n    App.on(\"start\", function() {\n        // render main view\n        App.layout = new App.Views.Layout({\n            el: $(\".backbone-container:first\")\n        });\n\n        App.layout.render();\n    });\n\n    $.ajax({\n        url: 'build/templates.html',\n        dataType: 'text'\n    }).done(function(templates) {\n        $(document.body).append(templates);\n    \n        $.ajaxSetup({\n            timeout: 2000,\n            headers: { 'X-Requested-With' : 'XMLHttpRequest' }\n        });\n\n        // boot application\n        App.start();\n    });\n});"]}